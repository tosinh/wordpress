(()=>{var e={838:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?r((i=e,Array.isArray(i)?[]:{}),e,t):e;var i}function o(e,t,i){return e.concat(t).map((function(e){return n(e,i)}))}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function a(e,t){try{return t in e}catch(e){return!1}}function r(e,i,l){(l=l||{}).arrayMerge=l.arrayMerge||o,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=n;var c=Array.isArray(i);return c===Array.isArray(e)?c?l.arrayMerge(e,i,l):function(e,t,i){var o={};return i.isMergeableObject(e)&&s(e).forEach((function(t){o[t]=n(e[t],i)})),s(t).forEach((function(s){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(a(e,s)&&i.isMergeableObject(t[s])?o[s]=function(e,t){if(!t.customMerge)return r;var i=t.customMerge(e);return"function"==typeof i?i:r}(s,i)(e[s],t[s],i):o[s]=n(t[s],i))})),o}(e,i,l):n(i,l)}r.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,i){return r(e,i,t)}),{})};var l=r;e.exports=l},538:(e,t,i)=>{"use strict";var n=i(609),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,i){var n,s={},c=null,d=null;for(n in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:o,type:e,key:c,ref:d,props:s,_owner:r.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},106:(e,t,i)=>{"use strict";e.exports=i(538)},609:e=>{"use strict";e.exports=window.React},698:(e,t)=>{var i;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=a(e,s(i)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var i in e)n.call(e,i)&&e[i]&&(t=a(t,i));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(i=function(){return o}.apply(t,[]))||(e.exports=i)}()}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};i.r(e),i.d(e,{closeModal:()=>pe,disableComplementaryArea:()=>oe,enableComplementaryArea:()=>ne,openModal:()=>de,pinItem:()=>se,setDefaultComplementaryArea:()=>ie,setFeatureDefaults:()=>ce,setFeatureValue:()=>le,toggleFeature:()=>re,unpinItem:()=>ae});var t={};i.r(t),i.d(t,{getActiveComplementaryArea:()=>me,isComplementaryAreaLoading:()=>ue,isFeatureActive:()=>ge,isItemPinned:()=>he,isModalActive:()=>_e});var n={};i.r(n),i.d(n,{changePreviewDeviceType:()=>Hi,closeSidebar:()=>$i,openSidebar:()=>Wi,requestSendingNewsletterPreview:()=>Xi,saveEditedEmail:()=>Yi,setTemplateToPost:()=>Ji,toggleFeature:()=>zi,togglePreviewModal:()=>Gi,toggleSettingsSidebarActiveTab:()=>qi,updateEmailMailPoetProperty:()=>Zi,updateSendPreviewEmail:()=>Ui});var o={};i.r(o),i.d(o,{getAutosaveInterval:()=>wn,getCdnUrl:()=>jn,getCurrentTemplate:()=>mn,getDeviceType:()=>vn,getEditedEmailContent:()=>cn,getEditedPostTemplate:()=>dn,getEmailPostId:()=>hn,getEmailTemplates:()=>un,getInitialEditorSettings:()=>xn,getPaletteColors:()=>yn,getPreviewState:()=>fn,getSettingsSidebarActiveTab:()=>gn,getStyles:()=>bn,getTemplateContent:()=>pn,getTheme:()=>kn,getUrls:()=>En,hasEdits:()=>nn,hasEmptyContent:()=>rn,isEmailLoaded:()=>on,isEmailSent:()=>ln,isEmpty:()=>an,isFeatureActive:()=>en,isPremiumPluginActive:()=>Sn,isSaving:()=>sn,isSidebarOpened:()=>tn}),window.wp.formatLibrary;const s=window.wp.data,a=window.wp.element,r=window.wp.blockLibrary,l=window.wp.hooks,c=window.wp.blockEditor,d=window.wp.compose;var p=i(106);const m=(0,d.createHigherOrderComponent)((e=>function(t){return"core/columns"!==t.name?(0,p.jsx)(e,{...t}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(e,{...t}),(0,p.jsx)(c.InspectorControls,{children:(0,p.jsx)("style",{children:"\n      .components-panel__body .components-toggle-control .components-form-toggle { opacity: 0.3; }\n      .components-panel__body .components-toggle-control .components-form-toggle__input { pointer-events: none; }\n      .components-panel__body .components-toggle-control label { pointer-events: none; }\n    "})})]})}),"columnsEditCallback"),u=window.wp.i18n;function h({layoutClassNames:e}){const t=(0,c.useBlockProps)({className:e});return(0,p.jsxs)("div",{...t,children:[(0,p.jsx)("p",{children:(0,u.__)("This is the Content block.","mailpoet")}),(0,p.jsx)("p",{children:(0,u.__)("It will display all the blocks in the email content, which might be only simple text paragraphs. You can enrich your message with images, incorporate data through tables, explore different layout designs with columns, or use any other block type.","mailpoet")})]})}const g=(0,d.createHigherOrderComponent)((e=>function(t){return"core/image"!==t.name?(0,p.jsx)(e,{...t}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(e,{...t}),(0,p.jsx)(c.InspectorControls,{children:(0,p.jsx)("style",{children:"\n        .components-tools-panel .components-toggle-control { display: none; }\n      "})})]})}),"imageEditCallback"),_=window.wp.richText;var x=i(698),y=i.n(x);const f=window.wp.blocks,v=window.wp.primitives,b=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M9 9v6h11V9H9zM4 20h1.5V4H4v16z"})}),w=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M12.5 15v5H11v-5H4V9h7V4h1.5v5h7v6h-7Z"})}),j=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M4 15h11V9H4v6zM18.5 4v16H20V4h-1.5z"})}),S=window.wp.components,k="__experimentalEmailFlexLayout";function E(e){return(0,f.hasBlockSupport)(e,k)}function T({justificationValue:e,onChange:t,isToolbar:i=!1}){const n=[{value:"left",icon:b,label:(0,u.__)("Justify items left","mailpoet")},{value:"center",icon:w,label:(0,u.__)("Justify items center","mailpoet")},{value:"right",icon:j,label:(0,u.__)("Justify items right","mailpoet")}];if(i){const i=n.map((e=>e.value));return(0,p.jsx)(c.JustifyContentControl,{value:e,onChange:t,allowedControls:i,popoverProps:{placement:"bottom-start"}})}return(0,p.jsx)(S.__experimentalToggleGroupControl,{__nextHasNoMarginBottom:!0,label:(0,u.__)("Justification","mailpoet"),value:e,onChange:t,className:"block-editor-hooks__flex-layout-justification-controls",children:n.map((({value:e,icon:t,label:i})=>(0,p.jsx)(S.__experimentalToggleGroupControlOptionIcon,{value:e,icon:t,label:i},e)))})}function C({setAttributes:e,attributes:t,name:i}){if(!(0,f.getBlockSupport)(i,k,{}))return null;const{justifyContent:n="left"}=t.layout||{},o=i=>{e({layout:{...t.layout,justifyContent:i}})};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.InspectorControls,{children:(0,p.jsx)(S.PanelBody,{title:(0,u.__)("Layout","mailpoet"),children:(0,p.jsx)(S.Flex,{children:(0,p.jsx)(S.FlexItem,{children:(0,p.jsx)(T,{justificationValue:n,onChange:o})})})})}),(0,p.jsx)(c.BlockControls,{group:"block",__experimentalShareWithChildBlocks:!0,children:(0,p.jsx)(T,{justificationValue:n,onChange:o,isToolbar:!0})})]})}function P(e){return E(e.name)?{...e,attributes:{...e.attributes,layout:{type:"object"}}}:e}const N=(0,d.createHigherOrderComponent)((e=>t=>[E(t.name)&&(0,p.jsx)(C,{...t},"layout"),(0,p.jsx)(e,{...t},"edit")]),"withLayoutControls");function I({block:e,props:t}){const{attributes:i}=t,{layout:n}=i,o=`is-content-justification-${n?.justifyContent||"left"}`,s=y()(o,"is-layout-email-flex is-layout-flex");return(0,p.jsx)(e,{...t,className:s})}const M=(0,d.createHigherOrderComponent)((e=>function(t){return E(t.name)?(0,p.jsx)(I,{block:e,props:t}):(0,p.jsx)(e,{...t})}),"withLayoutStyles"),B=window.wp.editor,R=window.wp.coreData,A="email-editor/editor",L="email-editor/editor/main",D="email",F="block",V="email-editor/editor/styles",O=window.wp.privateApis,{lock:z,unlock:H}=(0,O.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/edit-post"),G=window.wp.mediaUtils;function U(e){var t,i,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(i=U(e[t]))&&(n&&(n+=" "),n+=i)}else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}const W=function(){for(var e,t,i=0,n="",o=arguments.length;i<o;i++)(e=arguments[i])&&(t=U(e))&&(n&&(n+=" "),n+=t);return n},$=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})}),q=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})}),Y=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})}),Z=window.wp.viewport,J=window.wp.preferences,X=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})}),Q=window.wp.deprecated;var K=i.n(Q);function ee(e){return["core/edit-post","core/edit-site"].includes(e)?(K()(`${e} interface scope`,{alternative:"core interface scope",hint:"core/edit-post and core/edit-site are merging.",version:"6.6"}),"core"):e}function te(e,t){return"core"===e&&"edit-site/template"===t?(K()("edit-site/template sidebar",{alternative:"edit-post/document",version:"6.6"}),"edit-post/document"):"core"===e&&"edit-site/block-inspector"===t?(K()("edit-site/block-inspector sidebar",{alternative:"edit-post/block",version:"6.6"}),"edit-post/block"):t}const ie=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e=ee(e),area:t=te(e,t)}),ne=(e,t)=>({registry:i,dispatch:n})=>{t&&(e=ee(e),t=te(e,t),i.select(J.store).get(e,"isComplementaryAreaVisible")||i.dispatch(J.store).set(e,"isComplementaryAreaVisible",!0),n({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},oe=e=>({registry:t})=>{e=ee(e),t.select(J.store).get(e,"isComplementaryAreaVisible")&&t.dispatch(J.store).set(e,"isComplementaryAreaVisible",!1)},se=(e,t)=>({registry:i})=>{if(!t)return;e=ee(e),t=te(e,t);const n=i.select(J.store).get(e,"pinnedItems");!0!==n?.[t]&&i.dispatch(J.store).set(e,"pinnedItems",{...n,[t]:!0})},ae=(e,t)=>({registry:i})=>{if(!t)return;e=ee(e),t=te(e,t);const n=i.select(J.store).get(e,"pinnedItems");i.dispatch(J.store).set(e,"pinnedItems",{...n,[t]:!1})};function re(e,t){return function({registry:i}){K()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),i.dispatch(J.store).toggle(e,t)}}function le(e,t,i){return function({registry:n}){K()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),n.dispatch(J.store).set(e,t,!!i)}}function ce(e,t){return function({registry:i}){K()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),i.dispatch(J.store).setDefaults(e,t)}}function de(e){return{type:"OPEN_MODAL",name:e}}function pe(){return{type:"CLOSE_MODAL"}}const me=(0,s.createRegistrySelector)((e=>(t,i)=>{i=ee(i);const n=e(J.store).get(i,"isComplementaryAreaVisible");if(void 0!==n)return!1===n?null:t?.complementaryAreas?.[i]})),ue=(0,s.createRegistrySelector)((e=>(t,i)=>{i=ee(i);const n=e(J.store).get(i,"isComplementaryAreaVisible"),o=t?.complementaryAreas?.[i];return n&&void 0===o})),he=(0,s.createRegistrySelector)((e=>(t,i,n)=>{var o;n=te(i=ee(i),n);const s=e(J.store).get(i,"pinnedItems");return null===(o=s?.[n])||void 0===o||o})),ge=(0,s.createRegistrySelector)((e=>(t,i,n)=>(K()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(J.store).get(i,n))));function _e(e,t){return e.activeModal===t}const xe=(0,s.combineReducers)({complementaryAreas:function(e={},t){switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:i,area:n}=t;return e[i]?e:{...e,[i]:n}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:i,area:n}=t;return{...e,[i]:n}}}return e},activeModal:function(e=null,t){switch(t.type){case"OPEN_MODAL":return t.name;case"CLOSE_MODAL":return null}return e}}),ye=(0,s.createReduxStore)("core/interface",{reducer:xe,actions:e,selectors:t});(0,s.register)(ye);const fe=(0,window.wp.plugins.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),ve=fe((function({as:e=S.Button,scope:t,identifier:i,icon:n,selectedIcon:o,name:a,...r}){const l=e,c=(0,s.useSelect)((e=>e(ye).getActiveComplementaryArea(t)===i),[i,t]),{enableComplementaryArea:d,disableComplementaryArea:m}=(0,s.useDispatch)(ye);return(0,p.jsx)(l,{icon:o&&c?o:n,"aria-controls":i.replace("/",":"),onClick:()=>{c?m(t):d(t,i)},...r})})),be=({smallScreenTitle:e,children:t,className:i,toggleButtonProps:n})=>{const o=(0,p.jsx)(ve,{icon:X,...n});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"components-panel__header interface-complementary-area-header__small",children:[e&&(0,p.jsx)("h2",{className:"interface-complementary-area-header__small-title",children:e}),o]}),(0,p.jsxs)("div",{className:W("components-panel__header","interface-complementary-area-header",i),tabIndex:-1,children:[t,o]})]})},we=()=>{};function je({name:e,as:t=S.Button,onClick:i,...n}){return(0,p.jsx)(S.Fill,{name:e,children:({onClick:e})=>(0,p.jsx)(t,{onClick:i||e?(...t)=>{(i||we)(...t),(e||we)(...t)}:void 0,...n})})}je.Slot=function({name:e,as:t=S.ButtonGroup,fillProps:i={},bubblesVirtually:n,...o}){return(0,p.jsx)(S.Slot,{name:e,bubblesVirtually:n,fillProps:i,children:e=>{if(!a.Children.toArray(e).length)return null;const i=[];a.Children.forEach(e,(({props:{__unstableExplicitMenuItem:e,__unstableTarget:t}})=>{t&&e&&i.push(t)}));const n=a.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&i.includes(e.props.__unstableTarget)?null:e));return(0,p.jsx)(t,{...o,children:n})}})};const Se=je,ke=({__unstableExplicitMenuItem:e,__unstableTarget:t,...i})=>(0,p.jsx)(S.MenuItem,{...i});function Ee({scope:e,target:t,__unstableExplicitMenuItem:i,...n}){return(0,p.jsx)(ve,{as:n=>(0,p.jsx)(Se,{__unstableExplicitMenuItem:i,__unstableTarget:`${e}/${t}`,as:ke,name:`${e}/plugin-more-menu`,...n}),role:"menuitemcheckbox",selectedIcon:$,name:t,scope:e,...n})}function Te({scope:e,...t}){return(0,p.jsx)(S.Fill,{name:`PinnedItems/${e}`,...t})}Te.Slot=function({scope:e,className:t,...i}){return(0,p.jsx)(S.Slot,{name:`PinnedItems/${e}`,...i,children:e=>e?.length>0&&(0,p.jsx)("div",{className:W(t,"interface-pinned-items"),children:e})})};const Ce=Te,Pe={open:{width:280},closed:{width:0},mobileOpen:{width:"100vw"}};function Ne({activeArea:e,isActive:t,scope:i,children:n,className:o,id:s}){const r=(0,d.useReducedMotion)(),l=(0,d.useViewportMatch)("medium","<"),c=(0,d.usePrevious)(e),m=(0,d.usePrevious)(t),[,u]=(0,a.useState)({});(0,a.useEffect)((()=>{u({})}),[t]);const h={type:"tween",duration:r||l||c&&e&&e!==c?0:.3,ease:[.6,0,.4,1]};return(0,p.jsx)(S.Fill,{name:`ComplementaryArea/${i}`,children:(0,p.jsx)(S.__unstableAnimatePresence,{initial:!1,children:(m||t)&&(0,p.jsx)(S.__unstableMotion.div,{variants:Pe,initial:"closed",animate:l?"mobileOpen":"open",exit:"closed",transition:h,className:"interface-complementary-area__fill",children:(0,p.jsx)("div",{id:s,className:o,style:{width:l?"100vw":280},children:n})})})})}const Ie=fe((function({children:e,className:t,closeLabel:i=(0,u.__)("Close plugin"),identifier:n,header:o,headerClassName:r,icon:l,isPinnable:c=!0,panelClassName:d,scope:m,name:h,smallScreenTitle:g,title:_,toggleShortcut:x,isActiveByDefault:y}){const[f,v]=(0,a.useState)(!1),{isLoading:b,isActive:w,isPinned:j,activeArea:k,isSmall:E,isLarge:T,showIconLabels:C}=(0,s.useSelect)((e=>{const{getActiveComplementaryArea:t,isComplementaryAreaLoading:i,isItemPinned:o}=e(ye),{get:s}=e(J.store),a=t(m);return{isLoading:i(m),isActive:a===n,isPinned:o(m,n),activeArea:a,isSmall:e(Z.store).isViewportMatch("< medium"),isLarge:e(Z.store).isViewportMatch("large"),showIconLabels:s("core","showIconLabels")}}),[n,m]);!function(e,t,i,n,o){const r=(0,a.useRef)(!1),l=(0,a.useRef)(!1),{enableComplementaryArea:c,disableComplementaryArea:d}=(0,s.useDispatch)(ye);(0,a.useEffect)((()=>{n&&o&&!r.current?(d(e),l.current=!0):l.current&&!o&&r.current?(l.current=!1,c(e,t)):l.current&&i&&i!==t&&(l.current=!1),o!==r.current&&(r.current=o)}),[n,o,e,t,i,d,c])}(m,n,k,w,E);const{enableComplementaryArea:P,disableComplementaryArea:N,pinItem:I,unpinItem:M}=(0,s.useDispatch)(ye);if((0,a.useEffect)((()=>{y&&void 0===k&&!E?P(m,n):void 0===k&&E&&N(m,n),v(!0)}),[k,y,m,n,E,P,N]),f)return(0,p.jsxs)(p.Fragment,{children:[c&&(0,p.jsx)(Ce,{scope:m,children:j&&(0,p.jsx)(ve,{scope:m,identifier:n,isPressed:w&&(!C||T),"aria-expanded":w,"aria-disabled":b,label:_,icon:C?$:l,showTooltip:!C,variant:C?"tertiary":void 0,size:"compact"})}),h&&c&&(0,p.jsx)(Ee,{target:h,scope:m,icon:l,children:_}),(0,p.jsxs)(Ne,{activeArea:k,isActive:w,className:W("interface-complementary-area",t),scope:m,id:n.replace("/",":"),children:[(0,p.jsx)(be,{className:r,closeLabel:i,onClose:()=>N(m),smallScreenTitle:g,toggleButtonProps:{label:i,size:"small",shortcut:x,scope:m,identifier:n},children:o||(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h2",{className:"interface-complementary-area-header__title",children:_}),c&&(0,p.jsx)(S.Button,{className:"interface-complementary-area__pin-unpin-item",icon:j?q:Y,label:j?(0,u.__)("Unpin from toolbar"):(0,u.__)("Pin to toolbar"),onClick:()=>(j?M:I)(m,n),isPressed:j,"aria-expanded":j,size:"compact"})]})}),(0,p.jsx)(S.Panel,{className:d,children:e})]})]})}));Ie.Slot=function({scope:e,...t}){return(0,p.jsx)(S.Slot,{name:`ComplementaryArea/${e}`,...t})};const Me=Ie,Be=({isActive:e})=>((0,a.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,a.useEffect)((()=>(e?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{e&&document.body.classList.remove("is-fullscreen-mode")})),[e]),null);function Re({children:e,className:t,ariaLabel:i,as:n="div",...o}){return(0,p.jsx)(n,{className:W("interface-navigable-region",t),"aria-label":i,role:"region",tabIndex:"-1",...o,children:e})}const Ae={type:"tween",duration:.25,ease:[.6,0,.4,1]},Le={hidden:{opacity:1,marginTop:-60},visible:{opacity:1,marginTop:0},distractionFreeHover:{opacity:1,marginTop:0,transition:{...Ae,delay:.2,delayChildren:.2}},distractionFreeHidden:{opacity:0,marginTop:-60},distractionFreeDisabled:{opacity:0,marginTop:0,transition:{...Ae,delay:.8,delayChildren:.8}}},De=(0,a.forwardRef)((function({isDistractionFree:e,footer:t,header:i,editorNotices:n,sidebar:o,secondarySidebar:s,content:r,actions:l,labels:c,className:m,enableRegionNavigation:h=!0,shortcuts:g},_){const[x,y]=(0,d.useResizeObserver)(),f=(0,d.useViewportMatch)("medium","<"),v={type:"tween",duration:(0,d.useReducedMotion)()?0:.25,ease:[.6,0,.4,1]},b=(0,S.__unstableUseNavigateRegions)(g);!function(e){(0,a.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const w={
/* translators: accessibility text for the top bar landmark region. */
header:(0,u._x)("Header","header landmark area"),
/* translators: accessibility text for the content landmark region. */
body:(0,u.__)("Content"),
/* translators: accessibility text for the secondary sidebar landmark region. */
secondarySidebar:(0,u.__)("Block Library"),
/* translators: accessibility text for the settings landmark region. */
sidebar:(0,u.__)("Settings"),
/* translators: accessibility text for the publish landmark region. */
actions:(0,u.__)("Publish"),
/* translators: accessibility text for the footer landmark region. */
footer:(0,u.__)("Footer"),...c};return(0,p.jsxs)("div",{...h?b:{},ref:(0,d.useMergeRefs)([_,h?b.ref:void 0]),className:W(m,"interface-interface-skeleton",b.className,!!t&&"has-footer"),children:[(0,p.jsxs)("div",{className:"interface-interface-skeleton__editor",children:[(0,p.jsx)(S.__unstableAnimatePresence,{initial:!1,children:!!i&&(0,p.jsx)(Re,{as:S.__unstableMotion.div,className:"interface-interface-skeleton__header","aria-label":w.header,initial:e?"distractionFreeHidden":"hidden",whileHover:e?"distractionFreeHover":"visible",animate:e?"distractionFreeDisabled":"visible",exit:e?"distractionFreeHidden":"hidden",variants:Le,transition:v,children:i})}),e&&(0,p.jsx)("div",{className:"interface-interface-skeleton__header",children:n}),(0,p.jsxs)("div",{className:"interface-interface-skeleton__body",children:[(0,p.jsx)(S.__unstableAnimatePresence,{initial:!1,children:!!s&&(0,p.jsx)(Re,{className:"interface-interface-skeleton__secondary-sidebar",ariaLabel:w.secondarySidebar,as:S.__unstableMotion.div,initial:"closed",animate:f?"mobileOpen":"open",exit:"closed",variants:{open:{width:y.width},closed:{width:0},mobileOpen:{width:"100vw"}},transition:v,children:(0,p.jsxs)("div",{style:{position:"absolute",width:f?"100vw":"fit-content",height:"100%",right:0},children:[x,s]})})}),(0,p.jsx)(Re,{className:"interface-interface-skeleton__content",ariaLabel:w.body,children:r}),!!o&&(0,p.jsx)(Re,{className:"interface-interface-skeleton__sidebar",ariaLabel:w.sidebar,children:o}),!!l&&(0,p.jsx)(Re,{className:"interface-interface-skeleton__actions",ariaLabel:w.actions,children:l})]})]}),!!t&&(0,p.jsx)(Re,{className:"interface-interface-skeleton__footer",ariaLabel:w.footer,children:t})]})}));var Fe=i(838),Ve=i.n(Fe);function Oe(){const{templateTheme:e,templateId:t}=(0,s.useSelect)((e=>{let t={},i=null,n="";if("mailpoet_email"===e(B.store).getCurrentPostType()){const o=e(A).getEditedPostTemplate();t=o?.mailpoet_email_theme||{},i=o?.id,n=o?.content}else t=e(B.store).getCurrentPostAttribute("mailpoet_email_theme")||{};return{templateTheme:t,templateId:i,templateContent:n}}),[]);return{templateTheme:e,updateTemplateTheme:(0,a.useCallback)((e=>{t&&(0,s.dispatch)(R.store).editEntityRecord("postType","wp_template",t,{mailpoet_email_theme:e})}),[t])}}const{useGlobalStylesOutputWithConfig:ze}=H(c.privateApis);function He(){const{hasEdits:e,autosaveInterval:t}=(0,s.useSelect)((e=>({hasEdits:e(A).hasEdits(),autosaveInterval:e(A).getAutosaveInterval()})),[]),{saveEditedEmail:i}=(0,s.useDispatch)(A);return(0,a.useEffect)((()=>{let n;return e&&t>0&&(n=setTimeout((()=>{i()}),1e3*t)),()=>{n&&clearTimeout(n)}}),[e,t,i]),null}const Ge=(0,p.jsx)(v.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4 14.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h8v13zm4.5-.5c0 .3-.2.5-.5.5h-2.5v-13H18c.3 0 .5.2.5.5v12z"})}),{Tabs:Ue}=H(S.privateApis),We=a.forwardRef((function(e,t){return(0,p.jsxs)(Ue.TabList,{ref:t,children:[(0,p.jsx)(Ue.Tab,{tabId:D,children:(0,u.__)("Email","mailpoet")}),(0,p.jsx)(Ue.Tab,{tabId:F,children:(0,u.__)("Block")})]})})),$e=150,qe=80;function Ye(){var e,t,i;const[n]=(0,R.useEntityProp)("postType","mailpoet_email","mailpoet_data"),{updateEmailMailPoetProperty:o}=(0,s.useDispatch)(A),r=(0,a.createInterpolateElement)((0,u.__)("Use shortcodes to personalize your email, or learn more about <bestPracticeLink>best practices</bestPracticeLink> and using <emojiLink>emoji in subject lines</emojiLink>.","mailpoet"),{bestPracticeLink:(0,p.jsx)("a",{href:"https://www.mailpoet.com/blog/17-email-subject-line-best-practices-to-boost-engagement/",target:"_blank",rel:"noopener noreferrer"}),emojiLink:(0,p.jsx)("a",{href:"https://www.mailpoet.com/blog/tips-using-emojis-in-subject-lines/",target:"_blank",rel:"noopener noreferrer"})}),l=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:(0,u.__)("Subject","mailpoet")}),(0,p.jsx)(S.ExternalLink,{href:"https://kb.mailpoet.com/article/215-personalize-newsletter-with-shortcodes#list",children:(0,u.__)("Shortcode guide","mailpoet")})]}),c=null!==(e=n?.preheader?.length)&&void 0!==e?e:0,d=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:(0,u.__)("Preview text","mailpoet")}),(0,p.jsxs)("span",{className:y()("mailpoet-settings-panel__preview-text-length",{"mailpoet-settings-panel__preview-text-length-warning":c>qe,"mailpoet-settings-panel__preview-text-length-error":c>$e}),children:[c,"/",$e]})]});return(0,p.jsxs)(S.PanelBody,{title:(0,u.__)("Details","mailpoet"),className:"mailpoet-email-editor__settings-panel",children:[(0,p.jsx)(S.TextareaControl,{className:"mailpoet-settings-panel__subject",label:l,placeholder:(0,u.__)("Eg. The summer sale is here!","mailpoet"),value:null!==(t=n?.subject)&&void 0!==t?t:"",onChange:e=>o("subject",e),"data-automation-id":"email_subject"}),(0,p.jsx)("div",{className:"mailpoet-settings-panel__help",children:(0,p.jsx)(S.__experimentalText,{children:r})}),(0,p.jsx)(S.TextareaControl,{className:"mailpoet-settings-panel__preview-text",label:d,placeholder:(0,u.__)("Add a preview text to capture subscribers' attention and increase open rates.","mailpoet"),value:null!==(i=n?.preheader)&&void 0!==i?i:"",onChange:e=>o("preheader",e),"data-automation-id":"email_preview_text"}),(0,p.jsx)("div",{className:"mailpoet-settings-panel__help",children:(0,p.jsx)(S.__experimentalText,{children:(0,a.createInterpolateElement)((0,u.__)("<link>This text</link> will appear in the inbox, underneath the subject line.","mailpoet"),{link:(0,p.jsx)("a",{href:new URL("article/418-preview-text","https://kb.mailpoet.com/").toString(),target:"_blank",rel:"noopener noreferrer"},"preview-text-kb")})})})]})}const Ze=(0,a.forwardRef)((function({icon:e,size:t=24,...i},n){return(0,a.cloneElement)(e,{width:t,height:t,...i,ref:n})})),Je=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{fillRule:"evenodd",d:"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z",clipRule:"evenodd"})});function Xe(){return(0,p.jsx)(S.Panel,{className:"mailpoet-email-sidebar__email-type-info",children:(0,p.jsx)(S.PanelBody,{children:(0,p.jsxs)(S.PanelRow,{children:[(0,p.jsx)("span",{className:"mailpoet-email-type-info__icon",children:(0,p.jsx)(Ze,{icon:Je})}),(0,p.jsxs)("div",{className:"mailpoet-email-type-info__content",children:[(0,p.jsx)("h2",{children:(0,u.__)("Newsletter","mailpoet")}),(0,p.jsx)("span",{children:(0,u.__)("Send or schedule a newsletter to connect with your subscribers.","mailpoet")})]})]})})})}const Qe=window.wp.htmlEntities,Ke=window.wp.notices,et=window.wp.apiFetch;var tt=i.n(et);const it=window.wp.url;function nt(){const{onNavigateToEntityRecord:e,template:t,hasHistory:i}=(0,s.useSelect)((e=>{const{getEditorSettings:t}=H(e(B.store)),i=t();return{onNavigateToEntityRecord:i.onNavigateToEntityRecord,hasHistory:!!i.onNavigateToPreviousEntityRecord,template:e(A).getEditedPostTemplate()}}),[]),{saveEditedEntityRecord:n}=(0,s.useDispatch)(R.store),{createSuccessNotice:o,createErrorNotice:a}=(0,s.useDispatch)(Ke.store);return(0,p.jsxs)(S.PanelBody,{title:(0,u.__)("Templates Experiment","mailpoet"),className:"mailpoet-email-editor__settings-panel",children:[(0,p.jsx)("p",{children:"Components from this Panel will be placed in different areas of the UI. They are place here in one place just to simplify the experiment."}),(0,p.jsx)("hr",{}),(0,p.jsx)("h3",{children:"Edit template toggle"}),t&&!i&&(0,p.jsx)(S.Button,{variant:"primary",onClick:()=>{e({postId:t.id,postType:"wp_template"})},disabled:!t.id,children:(0,u.__)("Edit template","mailpoet")}),(0,p.jsx)("hr",{}),(0,p.jsx)("h3",{children:"Revert Template"}),(0,p.jsx)(S.Button,{variant:"primary",onClick:()=>{!async function(){try{await async function(e){const t=(0,s.select)(R.store).getEntityConfig("postType",e.type),i=(0,it.addQueryArgs)(`${t.baseURL}/${e.id}`,{context:"edit",source:"theme"}),n=await tt()({path:i}),o=(0,f.parse)(n?.content?.raw);(0,s.dispatch)(R.store).editEntityRecord("postType",e.type,n.id,{content:({blocks:e=[]})=>(0,f.__unstableSerializeAndClean)(e),blocks:o,source:"theme"})}(t),await n("postType",t.type,t.id,{}),o((0,u.sprintf)(/* translators: The template/part's name. */ /* translators: The template/part's name. */
(0,u.__)('"%s" reset.',"mailpoet"),(0,Qe.decodeEntities)(t.title)),{type:"snackbar",id:"edit-site-template-reverted"})}catch(e){a((0,u.__)("An error occurred while reverting the template.","mailpoet"),{type:"snackbar"})}}()},children:(0,u.__)("Revert customizations","mailpoet")})]})}function ot(){return(0,p.jsxs)(S.Panel,{children:[(0,p.jsx)(Xe,{}),(0,p.jsx)(nt,{}),(0,p.jsx)(Ye,{})]})}const st=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})});function at(){const e=(0,s.useSelect)((e=>e(A).getCurrentTemplate()),[]);return(0,p.jsx)(S.Panel,{className:"mailpoet-email-sidebar__email-type-info",children:(0,p.jsx)(S.PanelBody,{children:(0,p.jsxs)(S.PanelRow,{children:[(0,p.jsx)("span",{className:"mailpoet-email-type-info__icon",children:(0,p.jsx)(Ze,{icon:st})}),(0,p.jsxs)("div",{className:"mailpoet-email-type-info__content",children:[(0,p.jsx)("h2",{children:e?.title||(0,u.__)("Template","mailpoet")}),(0,p.jsx)("span",{children:e?.description||""})]})]})})})}function rt(){return(0,p.jsxs)(S.Panel,{children:[(0,p.jsx)(at,{}),(0,p.jsx)(nt,{})]})}const{Tabs:lt}=H(S.privateApis);function ct(e){const{isEditingTemplate:t}=(0,s.useSelect)((e=>({isEditingTemplate:"wp_template"===e(B.store).getCurrentPostType()})),[]),i=(0,a.useRef)(null),n=(0,a.useContext)(lt.Context);return(0,p.jsx)(Me,{identifier:L,headerClassName:"editor-sidebar__panel-tabs",className:"edit-post-sidebar",header:(0,p.jsx)(lt.Context.Provider,{value:n,children:(0,p.jsx)(We,{ref:i})}),icon:Ge,scope:A,smallScreenTitle:(0,u.__)("No title","mailpoet"),isActiveByDefault:!0,...e,children:(0,p.jsxs)(lt.Context.Provider,{value:n,children:[(0,p.jsx)(lt.TabPanel,{tabId:D,children:t?(0,p.jsx)(rt,{}):(0,p.jsx)(ot,{})}),(0,p.jsx)(lt.TabPanel,{tabId:F,children:(0,p.jsx)(c.BlockInspector,{})})]})})}function dt(e){const{toggleSettingsSidebarActiveTab:t}=(0,s.useDispatch)(A),{activeTab:i,selectedBlockId:n}=(0,s.useSelect)((e=>({activeTab:e(A).getSettingsSidebarActiveTab(),selectedBlockId:e(c.store).getSelectedBlockClientId()})),[]);return(0,a.useEffect)((()=>{t(n?F:D)}),[n,t]),(0,p.jsx)(lt,{selectedTabId:i||D,onSelect:e=>t(e),children:(0,p.jsx)(ct,{...e})})}const pt=e=>{const t=(0,f.getBlockSupport)(e,"background");return t&&!1!==t?.backgroundImage};function mt(){const e=(0,s.useSelect)((e=>e("core/block-editor").getSelectedBlock()),[]),t=(0,f.hasBlockSupport)(e?.name,"__experimentalBorder",!1);return(0,p.jsxs)(p.Fragment,{children:[t&&(0,p.jsx)(S.Fill,{name:"InspectorControlsBorder",children:(0,p.jsx)(S.Notice,{className:"mailpoet__grid-full-width",status:"warning",isDismissible:!1,children:(0,u.__)("Border display may vary or be unsupported in some email clients.","mailpoet")})}),pt(e?.name)&&(0,p.jsx)(S.Fill,{name:"InspectorControlsBackground",children:(0,p.jsx)(S.Notice,{className:"mailpoet__grid-full-width",status:"warning",isDismissible:!1,children:(0,u.__)("Select a background color for email clients that do not support background images.","mailpoet")})})]})}const ut=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),ht=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"})}),gt=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})}),_t=(0,p.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)(v.Path,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"})}),xt=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M6.6 6L5.4 7l4.5 5-4.5 5 1.1 1 5.5-6-5.4-6zm6 0l-1.1 1 4.5 5-4.5 5 1.1 1 5.5-6-5.5-6z"})}),yt=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M11.6 7l-1.1-1L5 12l5.5 6 1.1-1L7 12l4.6-5zm6 0l-1.1-1-5.5 6 5.5 6 1.1-1-4.6-5 4.6-5z"})}),ft=window.wp.keycodes,vt=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})});function bt({onClose:e,onRemove:t,postId:i}){const{getLastEntityDeleteError:n}=(0,s.useSelect)(R.store),{deleteEntityRecord:o}=(0,s.useDispatch)(R.store),{createErrorNotice:a}=(0,s.useDispatch)(Ke.store),r=()=>{e()};return(0,p.jsxs)(S.Modal,{className:"mailpoet-move-to-trash-modal",title:(0,u.__)("Move to trash","mailpoet"),onRequestClose:r,focusOnMount:"firstContentElement",children:[(0,p.jsx)("p",{children:(0,u.__)("Are you sure you want to move this email to trash?","mailpoet")}),(0,p.jsxs)("div",{className:"mailpoet-send-preview-modal-footer",children:[(0,p.jsx)(S.Button,{variant:"tertiary",onClick:r,children:(0,u.__)("Cancel","mailpoet")}),(0,p.jsx)(S.Button,{variant:"primary",onClick:async()=>{if(await o("postType","mailpoet_email",i,{},{throwOnError:!1}))t();else{const e=n("postType","mailpoet_email",i);if(410===e?.code)t();else{const t=e?.message?e.message:(0,u.__)("An error occurred while moving the email to the trash.","mailpoet");await a(t,{type:"snackbar",isDismissible:!0,context:"email-editor"})}}},children:(0,u.__)("Move to trash","mailpoet")})]})]})}function wt(){const[e,t]=(0,a.useState)(!1),{urls:i,postId:n}=(0,s.useSelect)((e=>({urls:e(A).getUrls(),postId:e(A).getEmailPostId()})),[]),[o,r]=(0,R.useEntityProp)("postType","mailpoet_email","status"),{saveEditedEmail:l,updateEmailMailPoetProperty:c}=(0,s.useDispatch)(A);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(S.DropdownMenu,{className:"edit-site-more-menu",popoverProps:{className:"edit-site-more-menu__content"},icon:vt,label:(0,u.__)("More","mailpoet"),children:()=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(S.MenuGroup,{label:(0,u._x)("View","noun","mailpoet"),children:[(0,p.jsx)(J.PreferenceToggleMenuItem,{scope:"core",name:"fixedToolbar",label:(0,u.__)("Top toolbar","mailpoet"),info:(0,u.__)("Access all block and document tools in a single place","mailpoet"),messageActivated:(0,u.__)("Top toolbar activated","mailpoet"),messageDeactivated:(0,u.__)("Top toolbar deactivated","mailpoet")}),(0,p.jsx)(J.PreferenceToggleMenuItem,{scope:"core",name:"focusMode",label:(0,u.__)("Spotlight mode","mailpoet"),info:(0,u.__)("Focus at one block at a time","mailpoet"),messageActivated:(0,u.__)("Spotlight mode activated","mailpoet"),messageDeactivated:(0,u.__)("Spotlight mode deactivated","mailpoet")}),(0,p.jsx)(J.PreferenceToggleMenuItem,{scope:A,name:"fullscreenMode",label:(0,u.__)("Fullscreen mode","mailpoet"),info:(0,u.__)("Work without distraction","mailpoet"),messageActivated:(0,u.__)("Fullscreen mode activated","mailpoet"),messageDeactivated:(0,u.__)("Fullscreen mode deactivated","mailpoet"),shortcut:ft.displayShortcut.secondary("f")})]}),(0,p.jsx)(S.MenuGroup,{children:"trash"===o?(0,p.jsx)(S.MenuItem,{onClick:async()=>{await r("draft"),await c("deleted_at",""),await l()},children:(0,u.__)("Restore from trash","mailpoet")}):(0,p.jsx)(S.MenuItem,{onClick:()=>t(!0),isDestructive:!0,children:(0,u.__)("Move to trash","mailpoet")})})]})}),e&&(0,p.jsx)(bt,{onClose:()=>t(!1),onRemove:()=>{window.location.href=i.listings},postId:n})]})}const jt=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"})}),St=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})}),kt=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})});let Et=function(e){return e.SUCCESS="success",e.ERROR="error",e}({});function Tt(){const e=(0,a.useRef)(null),{requestSendingNewsletterPreview:t,togglePreviewModal:i,updateSendPreviewEmail:n}=(0,s.useDispatch)(A),{toEmail:o,isSendingPreviewEmail:r,sendingPreviewStatus:l,isModalOpened:c}=(0,s.useSelect)((e=>e(A).getPreviewState()),[]),[d]=(0,R.useEntityProp)("postType","mailpoet_email","mailpoet_data"),m=()=>{t(d.id,o)},h=()=>i(!1);return(0,a.useEffect)((()=>{c&&e.current?.focus()}),[c]),c?(0,p.jsxs)(S.Modal,{className:"mailpoet-send-preview-email",title:(0,u.__)("Send a test email","mailpoet"),onRequestClose:h,focusOnMount:!1,children:[l===Et.ERROR?(0,p.jsxs)("div",{className:"mailpoet-send-preview-modal-notice-error",children:[(0,u.__)("Sorry, we were unable to send this email.","mailpoet"),(0,p.jsxs)("ul",{children:[(0,p.jsx)("li",{children:(0,a.createInterpolateElement)((0,u.__)("Please check your <link>sending method configuration</link> with your hosting provider.","mailpoet"),{link:(0,p.jsx)("a",{href:"admin.php?page=mailpoet-settings#mta",target:"_blank",rel:"noopener noreferrer"})})}),(0,p.jsx)("li",{children:(0,a.createInterpolateElement)((0,u.__)("Or, sign up for MailPoet Sending Service to easily send emails. <link>Sign up for free</link>","mailpoet"),{link:(0,p.jsx)("a",{href:new URL("free-plan","https://www.mailpoet.com/").toString(),target:"_blank",rel:"noopener noreferrer"},"sign-up-for-free")})})]})]}):null,(0,p.jsx)("p",{children:(0,a.createInterpolateElement)((0,u.__)("Send yourself a test email to test how your email would look like in different email apps. You can also test your spam score by sending a test email to <link1>{$serviceName}</link1>. <link2>Learn more</link2>.","mailpoet").replace("{$serviceName}","Mail Tester"),{link1:(0,p.jsx)("a",{href:"https://www.mail-tester.com/",target:"_blank",rel:"noopener noreferrer"}),link2:(0,p.jsx)("a",{href:"https://kb.mailpoet.com/article/147-test-your-spam-score-with-mail-tester",target:"_blank",rel:"noopener noreferrer"})})}),(0,p.jsx)(S.TextControl,{label:(0,u.__)("Send to","mailpoet"),onChange:e=>{n(e)},onKeyDown:e=>{const{keyCode:t}=e;t===ft.ENTER&&(e.preventDefault(),m())},value:o,type:"email",ref:e,required:!0}),l===Et.SUCCESS?(0,p.jsxs)("p",{className:"mailpoet-send-preview-modal-notice-success",children:[(0,p.jsx)(Ze,{icon:$,style:{fill:"#4AB866"}}),(0,u.__)("Test email sent successfully!","mailpoet")]}):null,(0,p.jsxs)("div",{className:"mailpoet-send-preview-modal-footer",children:[(0,p.jsx)(S.Button,{variant:"tertiary",onClick:h,children:(0,u.__)("Close","mailpoet")}),(0,p.jsx)(S.Button,{variant:"primary",onClick:m,disabled:r||!(0,it.isEmail)(o),children:r?(0,u.__)("Sending…","mailpoet"):(0,u.__)("Send test email","mailpoet")})]})]}):null}function Ct(){const[e]=(0,R.useEntityProp)("postType","mailpoet_email","mailpoet_data"),t=(0,s.useSelect)((e=>e(A).getDeviceType()),[]),{changePreviewDeviceType:i,togglePreviewModal:n}=(0,s.useDispatch)(A),o=e?.preview_url||"",a=e=>{i(e)},r={mobile:jt,desktop:St};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(S.DropdownMenu,{className:"mailpoet-preview-dropdown",label:(0,u.__)("Preview","mailpoet"),icon:r[t.toLowerCase()],children:({onClose:e})=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(S.MenuGroup,{children:[(0,p.jsx)(S.MenuItem,{className:"block-editor-post-preview__button-resize",onClick:()=>a("Desktop"),icon:"Desktop"===t&&$,children:(0,u.__)("Desktop","mailpoet")}),(0,p.jsx)(S.MenuItem,{className:"block-editor-post-preview__button-resize",onClick:()=>a("Mobile"),icon:"Mobile"===t&&$,children:(0,u.__)("Mobile","mailpoet")})]}),(0,p.jsx)(S.MenuGroup,{children:(0,p.jsx)(S.MenuItem,{className:"block-editor-post-preview__button-resize",onClick:()=>{n(!0),e()},children:(0,u.__)("Send a test email","mailpoet")})}),o?(0,p.jsx)(S.MenuGroup,{children:(0,p.jsx)("div",{className:"edit-post-header-preview__grouping-external",children:(0,p.jsxs)(S.Button,{className:"edit-post-header-preview__button-external components-menu-item__button",onClick:()=>{var e;e=o,window.open(e,"_blank","noreferrer")},children:[(0,u.__)("Preview in new tab","mailpoet"),(0,p.jsx)(Ze,{icon:kt})]})})}):null]})}),(0,p.jsx)(Tt,{})]})}const Pt=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M17.3 10.1c0-2.5-2.1-4.4-4.8-4.4-2.2 0-4.1 1.4-4.6 3.3h-.2C5.7 9 4 10.7 4 12.8c0 2.1 1.7 3.8 3.7 3.8h9c1.8 0 3.2-1.5 3.2-3.3.1-1.6-1.1-2.9-2.6-3.2zm-.5 5.1h-9c-1.2 0-2.2-1.1-2.2-2.3s1-2.4 2.2-2.4h1.3l.3-1.1c.4-1.3 1.7-2.2 3.2-2.2 1.8 0 3.3 1.3 3.3 2.9v1.3l1.3.2c.8.1 1.4.9 1.4 1.8-.1 1-.9 1.8-1.8 1.8z"})});function Nt(){const{saveEditedEmail:e}=(0,s.useDispatch)(A),{dirtyEntityRecords:t}=(0,B.useEntitiesSavedStatesIsDirty)(),{hasEdits:i,isEmpty:n,isSaving:o}=(0,s.useSelect)((e=>({hasEdits:e(A).hasEdits(),isEmpty:e(A).isEmpty(),isSaving:e(A).isSaving()})),[]),r=(0,a.useRef)(null),l=t.some((e=>"mailpoet_email"!==e.name)),c=!n&&!o&&!i,d=n||o||c;let m=(0,u.__)("Save Draft","mailpoet");return c?m=(0,u.__)("Saved","mailpoet"):o&&(m=(0,u.__)("Saving","mailpoet")),l?(0,p.jsx)("div",{ref:r,children:(0,p.jsx)(S.Dropdown,{popoverProps:{placement:"bottom",anchor:r.current},contentClassName:"mailpoet-email-editor-save-button__dropdown",renderToggle:({onToggle:e})=>(0,p.jsx)(S.Button,{onClick:e,variant:"tertiary",children:i?(0,u.__)("Save email & template","mailpoet"):(0,u.__)("Save template","mailpoet")}),renderContent:({onToggle:e})=>(0,p.jsx)(B.EntitiesSavedStates,{close:e})})}):(0,p.jsxs)(S.Button,{variant:"tertiary",disabled:d,onClick:e,children:[o&&(0,p.jsx)(Ze,{icon:Pt}),c&&(0,p.jsx)(Ze,{icon:$}),m]})}const It=(0,p.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)(v.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})});function Mt(){const{showIconLabels:e}=(0,s.useSelect)((e=>({showIconLabels:e(A).isFeatureActive("showIconLabels"),postId:e(A).getEmailPostId()})),[]),[t="",i]=(0,R.useEntityProp)("postType","mailpoet_email","title"),n=(0,a.useRef)(null);return(0,p.jsx)("div",{ref:n,className:"mailpoet-email-editor-campaign-name",children:(0,p.jsx)(S.Dropdown,{popoverProps:{placement:"bottom",anchor:n.current},contentClassName:"mailpoet-email-editor-campaign-name__dropdown",renderToggle:({isOpen:i,onToggle:n})=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(S.Button,{onClick:n,className:"mailpoet-email-campaign-name__link",children:(0,p.jsxs)(S.__experimentalText,{size:"body",as:"h1",children:[(0,p.jsx)(S.VisuallyHidden,{as:"span",children:(0,u.__)("Editing email:","mailpoet")}),t]})}),(0,p.jsx)(S.Button,{className:"mailpoet-email-campaign-name__toggle",icon:It,"aria-expanded":i,"aria-haspopup":"true",onClick:n,label:(0,u.__)("Change campaign name","mailpoet"),children:e&&(0,u.__)("Rename","mailpoet")})]}),renderContent:()=>(0,p.jsx)("div",{className:"mailpoet-email-editor-email-title-edit",children:(0,p.jsx)(S.TextControl,{label:(0,u.__)("Campaign name","mailpoet"),value:t,onChange:e=>{i(e)},name:"campaign_name",help:(0,u.__)("Name your email campaign to indicate its purpose. This would only be visible to you and not shown to your subscribers.","mailpoet")})})})})}const Bt=window.wp.isShallowEqual;var Rt=i.n(Bt);function At(e){const t=(0,a.useRef)(e);return Rt()(e,t.current)||(t.current=e),t.current}const Lt=()=>{const e="email-validation",t=(0,s.useSelect)((t=>t(Ke.store).getNotices(e)));return{notices:t,hasValidationNotice:(0,a.useCallback)((e=>e?void 0!==t.find((t=>t.id===e)):t?.length>0),[t]),addValidationNotice:(0,a.useCallback)(((t,i,n=[])=>{(0,s.dispatch)(Ke.store).createNotice("error",i,{id:t,isDismissible:!1,actions:n,context:e})}),[e]),removeValidationNotice:(0,a.useCallback)((t=>{(0,s.dispatch)(Ke.store).removeNotice(t,e)}),[e])}},Dt=()=>{const{contentBlockId:e,hasFooter:t}=(0,s.useSelect)((e=>{const t=e(c.store).getBlocks().filter((e=>"mailpoet/powered-by-mailpoet"!==e.name&&"core/post-content"!==e.name)),i=e(c.store).getBlocksByName("core/post-content");return{contentBlockId:i?.[0],hasFooter:t.length>0}})),{addValidationNotice:i,hasValidationNotice:n,removeValidationNotice:o}=Lt(),{editedContent:r,editedTemplateContent:l,defaultTemplateId:d}=(0,s.useSelect)((e=>({editedContent:e(A).getEditedEmailContent(),editedTemplateContent:e(A).getTemplateContent(),defaultTemplateId:e(R.store).getDefaultTemplateId({slug:"email-general"})}))),p=At(r),m=At(l),h=`<a href='[link:subscription_unsubscribe_url]'>${(0,u.__)("Unsubscribe","mailpoet")}</a> | <a href='[link:subscription_manage_url]'>${(0,u.__)("Manage subscription","mailpoet")}</a>`,g=(0,a.useMemo)((()=>{const i=(0,f.createBlock)("core/paragraph",{className:"has-small-font-size",content:h});return[{id:"missing-unsubscribe-link",test:e=>!e.includes("[link:subscription_unsubscribe_url]"),message:(0,u.__)('All emails must include an "Unsubscribe" link.',"mailpoet"),actions:[{label:(0,u.__)("Insert link","mailpoet"),onClick:()=>{t?(0,s.dispatch)(R.store).editEntityRecord("postType","wp_template",d,{content:`\n                      ${l}\n                      \x3c!-- wp:paragraph --\x3e\n                      ${h}\n                      \x3c!-- /wp:paragraph --\x3e\n                    `}):(0,s.dispatch)(c.store).insertBlock(i,void 0,e)}}]}]}),[e,t,h,d,l]),_=(0,a.useCallback)((()=>{let e=!0;return g.forEach((({id:t,test:s,message:a,actions:r})=>{s(p+m)?(i(t,a,r),e=!1):n(t)&&o(t)})),e}),[p,m,i,o,n,g]);return(0,s.subscribe)((()=>{n()&&_()}),A),{isValid:n(),validateContent:_}};function Ft(){const[e]=(0,R.useEntityProp)("postType","mailpoet_email","mailpoet_data"),{isDirty:t}=(0,B.useEntitiesSavedStatesIsDirty)(),{validateContent:i,isValid:n}=Dt(),{hasEmptyContent:o,isEmailSent:a,isEditingTemplate:r}=(0,s.useSelect)((e=>({hasEmptyContent:e(A).hasEmptyContent(),isEmailSent:e(A).isEmailSent(),isEditingTemplate:"wp_template"===e(B.store).getCurrentPostType()})),[]),l=r||o||a||n||t,c=e;return(0,p.jsx)(S.Button,{variant:"primary",onClick:()=>{i()&&(window.location.href=`admin.php?page=mailpoet-newsletters#/send/${c.id}`)},disabled:l,children:(0,u.__)("Send","mailpoet")})}const Vt=S.ToolbarItem,Ot=c.BlockToolbar;function zt(){const e=(0,a.useRef)(),t=(0,a.useRef)(),i=(0,a.useRef)(),n=(0,a.useRef)(),[o,r]=(0,a.useState)(!1),{undo:l,redo:d}=(0,s.useDispatch)(R.store),{setIsInserterOpened:m,setIsListViewOpened:h}=(0,s.useDispatch)(B.store),{isInserterSidebarOpened:g,isListviewSidebarOpened:_,isFixedToolbarActive:x,isBlockSelected:f,hasUndo:v,hasRedo:b,hasDocumentNavigationHistory:w}=(0,s.useSelect)((e=>{const{getEditorSettings:t}=H(e(B.store)),i=t();return{isInserterSidebarOpened:e(B.store).isInserterOpened(),isListviewSidebarOpened:e(B.store).isListViewOpened(),isFixedToolbarActive:e(J.store).get("core","fixedToolbar"),isBlockSelected:!!e(c.store).getBlockSelectionStart(),hasUndo:e(R.store).hasUndo(),hasRedo:e(R.store).hasRedo(),hasDocumentNavigationHistory:!!i.onNavigateToPreviousEntityRecord}}),[]),j=e=>{e.preventDefault()},k=g?(0,u.__)("Close","mailpoet"):(0,u.__)("Add","mailpoet");return(0,p.jsxs)("div",{className:"editor-header edit-post-header",children:[(0,p.jsxs)("div",{className:"editor-header__toolbar",children:[(0,p.jsx)(c.NavigableToolbar,{className:"editor-document-tools edit-post-header-toolbar is-unstyled","aria-label":(0,u.__)("Email document tools","mailpoet"),children:(0,p.jsxs)("div",{className:"editor-document-tools__left",children:[(0,p.jsx)(Vt,{ref:e,as:S.Button,className:"editor-header-toolbar__inserter-toggle edit-post-header-toolbar__inserter-toggle",variant:"primary",isPressed:g,onMouseDown:j,onClick:()=>m(!g),disabled:!1,icon:ut,label:k,showTooltip:!0,"aria-expanded":g}),(0,p.jsx)(Vt,{ref:i,as:S.Button,className:"editor-history__undo",isPressed:!1,onMouseDown:j,onClick:l,disabled:!v,icon:ht,label:(0,u.__)("Undo","mailpoet"),showTooltip:!0}),(0,p.jsx)(Vt,{ref:n,as:S.Button,className:"editor-history__redo",isPressed:!1,onMouseDown:j,onClick:d,disabled:!b,icon:gt,label:(0,u.__)("Redo","mailpoet"),showTooltip:!0}),(0,p.jsx)(Vt,{ref:t,as:S.Button,className:"editor-header-toolbar__document-overview-toggle edit-post-header-toolbar__document-overview-toggle",isPressed:_,onMouseDown:j,onClick:()=>h(!_),disabled:!1,icon:_t,label:(0,u.__)("List view","mailpoet"),showTooltip:!0,"aria-expanded":g})]})}),x&&f&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:y()("editor-collapsible-block-toolbar",{"is-collapsed":o}),children:(0,p.jsx)(Ot,{hideDragHandle:!0})}),(0,p.jsx)(S.Button,{className:"editor-header__block-tools-toggle edit-post-header__block-tools-toggle",icon:o?xt:yt,onClick:()=>{r((e=>!e))},label:o?(0,u.__)("Show block tools","mailpoet"):(0,u.__)("Hide block tools","mailpoet")})]})]}),(!x||!f||o)&&(0,p.jsx)("div",{className:"editor-header__center edit-post-header__center",children:w?(0,p.jsx)(B.DocumentBar,{}):(0,p.jsx)(Mt,{})}),(0,p.jsxs)("div",{className:"editor-header__settings edit-post-header__settings",children:[(0,p.jsx)(Nt,{}),(0,p.jsx)(Ct,{}),(0,p.jsx)(Ft,{}),(0,p.jsx)(Ce.Slot,{scope:A}),(0,p.jsx)(wt,{})]})]})}function Ht(){return(0,p.jsx)("div",{className:"editor-list-view-sidebar",children:(0,p.jsx)(c.__experimentalListView,{})})}function Gt(){const{postContentId:e,isEditingEmailContent:t}=(0,s.useSelect)((e=>{const t=e(c.store).getBlocks();return{postContentId:t.find((e=>"core/post-content"===e.name))?.clientId,isEditingEmailContent:"wp_template"!==e(B.store).getCurrentPostType()}})),{setIsInserterOpened:i}=(0,s.useDispatch)(B.store);return(0,p.jsx)("div",{className:"editor-inserter-sidebar",children:(0,p.jsx)("div",{className:"editor-inserter-sidebar__content",children:(0,p.jsx)(c.__experimentalLibrary,{showMostUsedBlocks:!0,showInserterHelpPanel:!1,rootClientId:t?e:null,onClose:()=>i(!1)})})})}function Ut(){const{isEmailSent:e}=(0,s.useSelect)((e=>({isEmailSent:e(A).isEmailSent()})),[]);return(0,a.useEffect)((()=>{e&&(0,s.dispatch)(Ke.store).createNotice("warning",(0,u.__)("This email has already been sent. It can be edited, but not sent again. Duplicate this email if you want to send it again.","mailpoet"),{id:"email-sent",isDismissible:!1,context:"email-editor"})}),[e]),null}function Wt(){const{notices:e}=Lt();return 0===e.length?null:(0,p.jsx)(S.Notice,{status:"error",className:"mailpoet-email-editor-validation-errors components-editor-notices__pinned",isDismissible:!1,children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("strong",{children:(0,u.__)("Fix errors to continue:","mailpoet")}),(0,p.jsx)("ul",{children:e.map((({id:e,content:t,actions:i})=>(0,p.jsxs)("li",{children:[t,i.length>0?i.map((({label:e,onClick:t})=>(0,p.jsx)(S.Button,{onClick:t,variant:"link",children:e},e))):null]},e)))})]})})}function $t({context:e="email-editor"}){const{notices:t}=(0,s.useSelect)((t=>({notices:t(Ke.store).getNotices(e)})),[]),{removeNotice:i}=(0,s.useDispatch)(Ke.store),n=t.filter((({type:e})=>"snackbar"===e));return(0,p.jsx)(S.SnackbarList,{notices:n,className:"components-editor-notices__snackbar",onRemove:t=>i(t,e)})}function qt(){const{notices:e}=(0,s.useSelect)((e=>({notices:e(Ke.store).getNotices("email-editor")})),[]),{removeNotice:t}=(0,s.useDispatch)(Ke.store),i=e.filter((({isDismissible:e,type:t})=>e&&"default"===t)),n=e.filter((({isDismissible:e,type:t})=>!e&&"default"===t));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(S.NoticeList,{notices:n,className:"components-editor-notices__pinned"}),(0,p.jsx)(S.NoticeList,{notices:i,className:"components-editor-notices__dismissible",onRemove:e=>t(e,"email-editor")}),(0,p.jsx)(Wt,{}),(0,p.jsx)($t,{context:"global"}),(0,p.jsx)($t,{context:"email-editor"})]})}const Yt=(0,p.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)(v.Path,{d:"M12 4c-4.4 0-8 3.6-8 8v.1c0 4.1 3.2 7.5 7.2 7.9h.8c4.4 0 8-3.6 8-8s-3.6-8-8-8zm0 15V5c3.9 0 7 3.1 7 7s-3.1 7-7 7z"})}),Zt=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M6.9 7L3 17.8h1.7l1-2.8h4.1l1 2.8h1.7L8.6 7H6.9zm-.7 6.6l1.5-4.3 1.5 4.3h-3zM21.6 17c-.1.1-.2.2-.3.2-.1.1-.2.1-.4.1s-.3-.1-.4-.2c-.1-.1-.1-.3-.1-.6V12c0-.5 0-1-.1-1.4-.1-.4-.3-.7-.5-1-.2-.2-.5-.4-.9-.5-.4 0-.8-.1-1.3-.1s-1 .1-1.4.2c-.4.1-.7.3-1 .4-.2.2-.4.3-.6.5-.1.2-.2.4-.2.7 0 .3.1.5.2.8.2.2.4.3.8.3.3 0 .6-.1.8-.3.2-.2.3-.4.3-.7 0-.3-.1-.5-.2-.7-.2-.2-.4-.3-.6-.4.2-.2.4-.3.7-.4.3-.1.6-.1.8-.1.3 0 .6 0 .8.1.2.1.4.3.5.5.1.2.2.5.2.9v1.1c0 .3-.1.5-.3.6-.2.2-.5.3-.9.4-.3.1-.7.3-1.1.4-.4.1-.8.3-1.1.5-.3.2-.6.4-.8.7-.2.3-.3.7-.3 1.2 0 .6.2 1.1.5 1.4.3.4.9.5 1.6.5.5 0 1-.1 1.4-.3.4-.2.8-.6 1.1-1.1 0 .4.1.7.3 1 .2.3.6.4 1.2.4.4 0 .7-.1.9-.2.2-.1.5-.3.7-.4h-.3zm-3-.9c-.2.4-.5.7-.8.8-.3.2-.6.2-.8.2-.4 0-.6-.1-.9-.3-.2-.2-.3-.6-.3-1.1 0-.5.1-.9.3-1.2s.5-.5.8-.7c.3-.2.7-.3 1-.5.3-.1.6-.3.7-.6v3.4z"})}),Jt=(0,p.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)(v.Path,{d:"M17.2 10.9c-.5-1-1.2-2.1-2.1-3.2-.6-.9-1.3-1.7-2.1-2.6L12 4l-1 1.1c-.6.9-1.3 1.7-2 2.6-.8 1.2-1.5 2.3-2 3.2-.6 1.2-1 2.2-1 3 0 3.4 2.7 6.1 6.1 6.1s6.1-2.7 6.1-6.1c0-.8-.3-1.8-1-3zm-5.1 7.6c-2.5 0-4.6-2.1-4.6-4.6 0-.3.1-1 .8-2.3.5-.9 1.1-1.9 2-3.1.7-.9 1.3-1.7 1.8-2.3.7.8 1.3 1.6 1.8 2.3.8 1.1 1.5 2.2 2 3.1.7 1.3.8 2 .8 2.3 0 2.5-2.1 4.6-4.6 4.6z"})}),Xt={start:{scale:1,opacity:1},hover:{scale:0,opacity:0}},Qt={hover:{opacity:1},start:{opacity:.5}},Kt={hover:{scale:1,opacity:1},start:{scale:0,opacity:0}},ei=152,ti=32;function ii({label:e,isFocused:t,withHoverView:i}){const{styles:n,colors:o}=(0,s.useSelect)((e=>({styles:e(A).getStyles(),colors:e(A).getPaletteColors()})),[]),r=n?.color?.background||"#ffffff",l=n?.elements?.heading?.typography?.fontFamily||"inherit",c=n?.elements?.heading?.color?.text||"inherit",d=n?.elements?.heading?.typography?.fontWeight||"inherit",m=o.theme.concat(o.theme),u=m.filter((({color:e})=>e.toLowerCase()!==r.toLowerCase()&&e.toLowerCase()!==c.toLowerCase())).slice(0,2),[h,g]=(0,a.useState)(!1);return(0,p.jsx)("div",{onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:(0,p.jsxs)(S.__unstableMotion.div,{style:{height:1*ei,width:"100%",background:r,cursor:i?"pointer":void 0},initial:"start",animate:(h||t)&&e?"hover":"start",children:[(0,p.jsx)(S.__unstableMotion.div,{variants:Xt,style:{height:"100%",overflow:"hidden"},children:(0,p.jsxs)(S.__experimentalHStack,{spacing:10,justify:"center",style:{height:"100%",overflow:"hidden"},children:[(0,p.jsx)(S.__unstableMotion.div,{style:{fontFamily:l,fontSize:65,color:c,fontWeight:d},animate:{scale:1,opacity:1},initial:{scale:.1,opacity:0},transition:{delay:.3,type:"tween"},children:"Aa"}),(0,p.jsx)(S.__experimentalVStack,{spacing:4,children:u.map((({slug:e,color:t},i)=>(0,p.jsx)(S.__unstableMotion.div,{style:{height:1*ti,width:1*ti,background:t,borderRadius:1*ti/2},animate:{scale:1,opacity:1},initial:{scale:.1,opacity:0},transition:{delay:1===i?.2:.1}},e)))})]})}),(0,p.jsx)(S.__unstableMotion.div,{variants:i&&Qt,style:{height:"100%",width:"100%",position:"absolute",top:0,overflow:"hidden",filter:"blur(60px)",opacity:.1},children:(0,p.jsx)(S.__experimentalHStack,{spacing:0,justify:"flex-start",style:{height:"100%",overflow:"hidden"},children:m.slice(0,4).map((({color:e})=>(0,p.jsx)("div",{style:{height:"100%",background:e,flexGrow:1}},e)))})}),(0,p.jsx)(S.__unstableMotion.div,{variants:Kt,style:{height:"100%",width:"100%",overflow:"hidden",position:"absolute",top:0},children:(0,p.jsx)(S.__experimentalVStack,{spacing:3,justify:"center",style:{height:"100%",overflow:"hidden",padding:10,boxSizing:"border-box"},children:e&&(0,p.jsx)("div",{style:{fontSize:40,fontFamily:l,color:c,fontWeight:d,lineHeight:"1em",textAlign:"center"},children:e})})})]})})}function ni(){return(0,p.jsx)(S.Card,{size:"small",className:"edit-site-global-styles-screen-root",variant:"primary",children:(0,p.jsx)(S.CardBody,{children:(0,p.jsxs)(S.__experimentalVStack,{spacing:4,children:[(0,p.jsx)(S.Card,{children:(0,p.jsx)(S.CardMedia,{children:(0,p.jsx)(ii,{})})}),(0,p.jsxs)(S.__experimentalItemGroup,{children:[(0,p.jsx)(S.__experimentalNavigatorButton,{path:"/typography",children:(0,p.jsx)(S.__experimentalItem,{children:(0,p.jsxs)(S.__experimentalHStack,{justify:"flex-start",children:[(0,p.jsx)(S.Icon,{icon:Zt,size:24}),(0,p.jsx)(S.FlexItem,{children:(0,u.__)("Typography","mailpoet")})]})})}),(0,p.jsx)(S.__experimentalNavigatorButton,{path:"/colors",children:(0,p.jsx)(S.__experimentalItem,{children:(0,p.jsxs)(S.__experimentalHStack,{justify:"flex-start",children:[(0,p.jsx)(S.Icon,{icon:Jt,size:24}),(0,p.jsx)(S.FlexItem,{children:(0,u.__)("Colors","mailpoet")})]})})}),(0,p.jsx)(S.__experimentalNavigatorButton,{path:"/layout",children:(0,p.jsx)(S.__experimentalItem,{children:(0,p.jsxs)(S.__experimentalHStack,{justify:"flex-start",children:[(0,p.jsx)(S.Icon,{icon:st,size:24}),(0,p.jsx)(S.FlexItem,{children:(0,u.__)("Layout","mailpoet")})]})})})]})]})})})}const oi=()=>{const{templateTheme:e,updateTemplateTheme:t}=Oe(),i=e?.styles,{styles:n}=(0,s.useSelect)((e=>({styles:e(A).getStyles()}))),o=(0,a.useCallback)((i=>{const n={...e,styles:i};t(n)}),[t,e]),r=(0,a.useCallback)(((i,n)=>{const o=function(e,t,i){const n=Array.isArray(t)?[...t]:[t],o=Array.isArray(e)?[...e]:{...e},s=n.pop();let a=o;return n.forEach((e=>{const t=a[e];a[e]=Array.isArray(t)?[...t]:{...t},a=a[e]})),a[s]=i,o}(e,["styles",...i],n);t(o)}),[t,e]);return{styles:Ve().all([n||{},i||{}]),defaultStyles:n,updateStyleProp:r,updateStyles:o}},si={typography:{},color:{}},ai=(e,t,i="heading",n=!1)=>{switch(t){case"text":return{typography:e.typography,color:e.color};case"heading":return((e,t="heading",i=!1)=>i?Ve().all([si,e.elements.heading||{},e.elements[t]||{}]):{...si,...e.elements.heading||{},...e.elements[t]||{}})(e,null!=i?i:"heading",n);default:return e.elements[t]||si}};function ri({element:e,label:t}){const{styles:i}=oi(),n=ai(i,e,null,!0),{fontFamily:o,fontStyle:s,fontWeight:a,letterSpacing:r,textDecoration:l,textTransform:c}=n.typography,d=n.color?.text||"inherit",m=n.color?.background||"#f0f0f0",h=(0,u.sprintf)(
// translators: %s: is a subset of Typography, e.g., 'text' or 'links'.
// translators: %s: is a subset of Typography, e.g., 'text' or 'links'.
(0,u.__)("Typography %s styles","mailpoet"),t);return(0,p.jsx)(S.__experimentalItem,{children:(0,p.jsx)(S.__experimentalNavigatorButton,{path:`/typography/${e}`,"aria-label":h,children:(0,p.jsxs)(S.__experimentalHStack,{justify:"flex-start",children:[(0,p.jsx)(S.FlexItem,{className:"edit-site-global-styles-screen-typography__indicator",style:{fontFamily:null!=o?o:"serif",background:m,color:d,fontStyle:null!=s?s:"normal",fontWeight:null!=a?a:"normal",letterSpacing:null!=r?r:"normal",textDecoration:null!=l?l:"link"===e?"underline":"none",textTransform:null!=c?c:"none"},children:"Aa"}),(0,p.jsx)(S.FlexItem,{children:t})]})})})}const li=function(){return(0,p.jsx)(S.Card,{size:"small",variant:"primary",isBorderless:!0,children:(0,p.jsx)(S.CardBody,{children:(0,p.jsxs)(S.__experimentalVStack,{spacing:3,children:[(0,p.jsx)(S.__experimentalHeading,{level:3,className:"edit-site-global-styles-subtitle",children:(0,u.__)("Elements","mailpoet")}),(0,p.jsxs)(S.__experimentalItemGroup,{isBordered:!0,isSeparated:!0,size:"small",children:[(0,p.jsx)(ri,{element:"text",label:(0,u.__)("Text","mailpoet")}),(0,p.jsx)(ri,{element:"link",label:(0,u.__)("Links","mailpoet")}),(0,p.jsx)(ri,{element:"heading",label:(0,u.__)("Headings","mailpoet")}),(0,p.jsx)(ri,{element:"button",label:(0,u.__)("Buttons","mailpoet")})]})]})})})},ci=(0,p.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(v.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})});function di({title:e,description:t,onBack:i}){return(0,p.jsxs)(S.__experimentalVStack,{spacing:0,children:[(0,p.jsx)(S.__experimentalView,{children:(0,p.jsx)(S.__experimentalSpacer,{marginBottom:0,paddingX:4,paddingY:3,children:(0,p.jsxs)(S.__experimentalHStack,{spacing:2,children:[(0,p.jsx)(S.__experimentalNavigatorToParentButton,{style:{minWidth:24,padding:0},icon:ci,size:"small","aria-label":(0,u.__)("Navigate to the previous view","mailpoet"),onClick:i}),(0,p.jsx)(S.__experimentalSpacer,{children:(0,p.jsx)(S.__experimentalHeading,{className:"mailpoet-email-editor__styles-header",level:2,size:13,children:e})})]})})}),t&&(0,p.jsx)("p",{className:"mailpoet-email-editor__styles-header-description",children:t})]})}const pi=di;function mi(){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(pi,{title:(0,u.__)("Typography","mailpoet"),description:(0,u.__)("Manage the typography settings for different elements.","mailpoet")}),(0,p.jsx)(li,{})]})}const ui={fontFamily:!0,fontSize:!0,fontAppearance:!0,lineHeight:!0,letterSpacing:!1,textTransform:!1,textDecoration:!1,writingMode:!0,textColumns:!0},hi=function({element:e,headingLevel:t,defaultControls:i=ui}){const[n,o]=(0,c.useSettings)("typography.fontSizes","typography.fontFamilies"),s=o?.default||[],{styles:r,defaultStyles:l,updateStyleProp:d}=oi(),m=ai(r,e,t),h=ai(l,e,t),{fontFamily:g,fontSize:_,fontStyle:x,fontWeight:y,lineHeight:f,letterSpacing:v,textDecoration:b,textTransform:w}=m.typography,{fontFamily:j,fontSize:k,fontStyle:E,fontWeight:T,lineHeight:C,letterSpacing:P,textDecoration:N,textTransform:I}=h.typography,M="heading"!==e||"heading"!==t,B=(0,a.useCallback)(((i,n)=>{d("heading"===e?["elements",t,...i]:"text"===e?[...i]:["elements",e,...i],n)}),[e,d,t]),R=e=>{B(["typography","letterSpacing"],e)},A=e=>{B(["typography","lineHeight"],e)},L=e=>{B(["typography","fontSize"],e)},D=e=>{B(["typography","fontFamily"],e)},F=e=>{B(["typography","textDecoration"],e)},V=e=>{B(["typography","textTransform"],e)},O=({fontStyle:e,fontWeight:t})=>{B(["typography","fontStyle"],e),B(["typography","fontWeight"],t)};return(0,p.jsxs)(S.__experimentalToolsPanel,{label:(0,u.__)("Typography","mailpoet"),resetAll:()=>{B(["typography"],h.typography)},children:[(0,p.jsx)(S.__experimentalToolsPanelItem,{label:(0,u.__)("Font family","mailpoet"),hasValue:()=>g!==j,onDeselect:()=>D(j),isShownByDefault:i.fontFamily,children:(0,p.jsx)(c.__experimentalFontFamilyControl,{value:g,onChange:D,size:"__unstable-large",fontFamilies:s,__nextHasNoMarginBottom:!0})}),M&&(0,p.jsx)(S.__experimentalToolsPanelItem,{label:(0,u.__)("Font size","mailpoet"),hasValue:()=>_!==k,onDeselect:()=>L(k),isShownByDefault:i.fontSize,children:(0,p.jsx)(S.FontSizePicker,{value:_,onChange:L,fontSizes:n,disableCustomFontSizes:!1,withReset:!1,withSlider:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0})}),(0,p.jsx)(S.__experimentalToolsPanelItem,{className:"single-column",label:(0,u.__)("Appearance","mailpoet"),hasValue:()=>y!==T||x!==E,onDeselect:()=>{O({fontStyle:E,fontWeight:T})},isShownByDefault:i.fontAppearance,children:(0,p.jsx)(c.__experimentalFontAppearanceControl,{value:{fontStyle:x,fontWeight:y},onChange:O,hasFontStyles:!0,hasFontWeights:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0})}),(0,p.jsx)(S.__experimentalToolsPanelItem,{className:"single-column",label:(0,u.__)("Line height","mailpoet"),hasValue:()=>f!==C,onDeselect:()=>A(C),isShownByDefault:i.lineHeight,children:(0,p.jsx)(c.LineHeightControl,{__nextHasNoMarginBottom:!0,__unstableInputWidth:"auto",value:f,onChange:A,size:"__unstable-large"})}),(0,p.jsx)(S.__experimentalToolsPanelItem,{className:"single-column",label:(0,u.__)("Letter spacing","mailpoet"),hasValue:()=>v!==P,onDeselect:()=>R(P),isShownByDefault:i.letterSpacing,children:(0,p.jsx)(c.__experimentalLetterSpacingControl,{value:v,onChange:R,size:"__unstable-large",__unstableInputWidth:"auto"})}),(0,p.jsx)(S.__experimentalToolsPanelItem,{className:"single-column",label:(0,u.__)("Text decoration","mailpoet"),hasValue:()=>b!==N,onDeselect:()=>F(N),isShownByDefault:i.textDecoration,children:(0,p.jsx)(c.__experimentalTextDecorationControl,{value:b,onChange:F,size:"__unstable-large",__unstableInputWidth:"auto"})}),(0,p.jsx)(S.__experimentalToolsPanelItem,{label:(0,u.__)("Letter case","mailpoet"),hasValue:()=>w!==I,onDeselect:()=>V(I),isShownByDefault:i.textTransform,children:(0,p.jsx)(c.__experimentalTextTransformControl,{value:w,onChange:V,showNone:!0,isBlock:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0})})]})};function gi({element:e,headingLevel:t}){const{styles:i}=oi(),n=ai(i,e,t,!0),{fontFamily:o,fontSize:s,fontStyle:a,fontWeight:r,lineHeight:l,letterSpacing:c,textDecoration:d,textTransform:m}=n.typography,u=n.color?.text||"inherit",h=n.color?.background||"#f0f0f0",g="link"===e?{textDecoration:null!=d?d:"underline"}:{};return(0,p.jsx)("div",{className:"edit-site-typography-preview",style:{fontFamily:null!=o?o:"serif",background:h,color:u,lineHeight:l,fontSize:s,fontStyle:a,fontWeight:r,letterSpacing:c,textDecoration:d,textTransform:m,...g},children:"Aa"})}function _i({element:e}){const[t,i]=(0,a.useState)("heading"),n={text:{title:(0,u.__)("Text","mailpoet"),description:(0,u.__)("Manage the fonts and typography used on text.","mailpoet"),defaultControls:ui},link:{title:(0,u.__)("Links","mailpoet"),description:(0,u.__)("Manage the fonts and typography used on links.","mailpoet"),defaultControls:{...ui,textDecoration:!0}},heading:{title:(0,u.__)("Headings","mailpoet"),description:(0,u.__)("Manage the fonts and typography used on headings.","mailpoet"),defaultControls:{...ui,textTransform:!0}},button:{title:(0,u.__)("Buttons","mailpoet"),description:(0,u.__)("Manage the fonts and typography used on buttons.","mailpoet"),defaultControls:ui}};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(pi,{title:n[e].title,description:n[e].description}),(0,p.jsx)(S.__experimentalSpacer,{marginX:4,children:(0,p.jsx)(gi,{element:e,headingLevel:t})}),"heading"===e&&(0,p.jsx)(S.__experimentalSpacer,{marginX:4,marginBottom:"1em",children:(0,p.jsxs)(S.__experimentalToggleGroupControl,{label:(0,u.__)("Select heading level","mailpoet"),hideLabelFromVision:!0,value:t,onChange:e=>i(e.toString()),isBlock:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0,children:[(0,p.jsx)(S.__experimentalToggleGroupControlOption,{value:"heading",label:(0,u._x)("All","heading levels","mailpoet")}),(0,p.jsx)(S.__experimentalToggleGroupControlOption,{value:"h1",label:(0,u._x)("H1","Heading Level","mailpoet")}),(0,p.jsx)(S.__experimentalToggleGroupControlOption,{value:"h2",label:(0,u._x)("H2","Heading Level","mailpoet")}),(0,p.jsx)(S.__experimentalToggleGroupControlOption,{value:"h3",label:(0,u._x)("H3","Heading Level","mailpoet")}),(0,p.jsx)(S.__experimentalToggleGroupControlOption,{value:"h4",label:(0,u._x)("H4","Heading Level","mailpoet")})]})}),(0,p.jsx)(hi,{element:e,headingLevel:t,defaultControls:n[e].defaultControls})]})}function xi(){const{ColorPanel:e}=H(c.privateApis),{styles:t,defaultStyles:i,updateStyles:n}=oi(),o=(0,s.useSelect)((e=>e(A).getTheme()),[]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(pi,{title:(0,u.__)("Colors","mailpoet"),description:(0,u.__)("Manage palettes and the default color of different global elements.","mailpoet")}),(0,p.jsx)(e,{value:t,inheritValue:i,onChange:n,settings:o?.settings,panelId:"colors"})]})}const yi=window.lodash;function fi(){const[e]=(0,c.useSettings)("spacing.units"),t=(0,S.__experimentalUseCustomUnits)({availableUnits:e}),{styles:i,defaultStyles:n,updateStyleProp:o}=oi();return(0,p.jsxs)(S.__experimentalToolsPanel,{label:(0,u.__)("Dimensions","mailpoet"),resetAll:()=>{o(["spacing"],n.spacing)},children:[(0,p.jsx)(S.__experimentalToolsPanelItem,{isShownByDefault:!0,hasValue:()=>!(0,yi.isEqual)(i.spacing.padding,n.spacing.padding),label:(0,u.__)("Padding","mailpoet"),onDeselect:()=>o(["spacing","padding"],n.spacing.padding),className:"tools-panel-item-spacing",children:(0,p.jsx)(c.__experimentalSpacingSizesControl,{allowReset:!0,values:i.spacing.padding,onChange:e=>{o(["spacing","padding"],e)},label:(0,u.__)("Padding","mailpoet"),sides:["horizontal","vertical","top","left","right","bottom"],units:t})}),(0,p.jsx)(S.__experimentalToolsPanelItem,{isShownByDefault:!0,label:(0,u.__)("Block spacing","mailpoet"),hasValue:()=>i.spacing.blockGap!==n.spacing.blockGap,onDeselect:()=>o(["spacing","blockGap"],n.spacing.blockGap),className:"tools-panel-item-spacing",children:(0,p.jsx)(c.__experimentalSpacingSizesControl,{label:(0,u.__)("Block spacing","mailpoet"),min:0,onChange:e=>{o(["spacing","blockGap"],e.top)},showSideInLabel:!1,sides:["top"],values:{top:i.spacing.blockGap},allowReset:!0})})]})}function vi(){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(di,{title:(0,u.__)("Layout","mailpoet")}),(0,p.jsx)(fi,{})]})}function bi(e){return(0,p.jsx)(Me,{identifier:V,className:"mailpoet-email-editor__styles-panel",header:(0,u.__)("Styles","mailpoet"),icon:Yt,scope:A,smallScreenTitle:(0,u.__)("No title","mailpoet"),...e,children:(0,p.jsxs)(S.__experimentalNavigatorProvider,{initialPath:"/",children:[(0,p.jsx)(S.__experimentalNavigatorScreen,{path:"/",children:(0,p.jsx)(ni,{})}),(0,p.jsx)(S.__experimentalNavigatorScreen,{path:"/typography",children:(0,p.jsx)(mi,{})}),(0,p.jsx)(S.__experimentalNavigatorScreen,{path:"/typography/text",children:(0,p.jsx)(_i,{element:"text"})}),(0,p.jsx)(S.__experimentalNavigatorScreen,{path:"/typography/link",children:(0,p.jsx)(_i,{element:"link"})}),(0,p.jsx)(S.__experimentalNavigatorScreen,{path:"/typography/heading",children:(0,p.jsx)(_i,{element:"heading"})}),(0,p.jsx)(S.__experimentalNavigatorScreen,{path:"/typography/button",children:(0,p.jsx)(_i,{element:"button"})}),(0,p.jsx)(S.__experimentalNavigatorScreen,{path:"/colors",children:(0,p.jsx)(xi,{})}),(0,p.jsx)(S.__experimentalNavigatorScreen,{path:"/layout",children:(0,p.jsx)(vi,{})})]})})}function wi({contentRef:e}){const{onNavigateToEntityRecord:t,templateId:i}=(0,s.useSelect)((e=>{const{getEditorSettings:t,getCurrentTemplateId:i}=e(B.store);return{onNavigateToEntityRecord:t().onNavigateToEntityRecord,templateId:i()}}),[]),[n,o]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{const t=e=>{e.target.classList.contains("is-root-container")&&o(!0)},i=e.current;return i?.addEventListener("dblclick",t),()=>{i?.removeEventListener("dblclick",t)}}),[e]),(0,p.jsx)(S.__experimentalConfirmDialog,{isOpen:n,confirmButtonText:(0,u.__)("Edit template"),onConfirm:()=>{o(!1),t({postId:i,postType:"wp_template"})},onCancel:()=>o(!1),size:"medium",children:(0,u.__)("You’ve tried to select a block that is part of a template, which may be used on other emails. Would you like to edit the template?","mailpoet")})}const ji=500;function Si(e,t,i){return Math.min(Math.max(e,t),i)}function ki({isEnabled:e=!0}={}){const{getEnabledClientIdsTree:t,getBlockName:i,getBlockOrder:n}=H((0,s.useSelect)(c.store)),{selectBlock:o}=(0,s.useDispatch)(c.store);return(0,d.useRefEffect)((s=>{if(!e)return null;const a=e=>{(e.target===s||e.target.classList.contains("is-root-container"))&&((e,a)=>{const r=t().flatMap((({clientId:e})=>{const t=i(e);if("core/template-part"===t)return[];if("core/post-content"===t){const t=n(e);if(t.length)return t}return[e]})).reduce(((t,i)=>{const n=s.querySelector(`[data-block="${i}"]`);if(!n)return t;const o=n.getBoundingClientRect(),r=function(e,t,i){const n=e-Si(e,Number(i.left),Number(i.right)),o=t-Si(t,Number(i.top),Number(i.bottom));return Math.sqrt(n*n+o*o)}(Number(e),Number(a),o);return r<t.distance&&r<ji?{clientId:i,distance:r}:t}),{clientId:null,distance:Number.POSITIVE_INFINITY}),l=r?.clientId||"";l&&o(l)})(e.clientX,e.clientY)};return s.addEventListener("click",a),()=>s.removeEventListener("click",a)}),[e])}const Ei="wp_block",{ExperimentalBlockCanvas:Ti,useFlashEditableBlocks:Ci}=H(c.privateApis),Pi=[Ei,"wp_template","wp_navigation","wp_template_part"];function Ni({styles:e,disableIframe:t=!1,iframeProps:i,contentRef:n,className:o}){var r;const{renderingMode:l,wrapperBlockName:m,wrapperUniqueId:u,deviceType:h,isFocusedEntity:g,layout:_}=(0,s.useSelect)((e=>{const{getCurrentPostId:t,getCurrentPostType:i,getEditorSettings:n,getRenderingMode:o,getDeviceType:s}=e(B.store),a=i(),r=o();let l;a===Ei?l="core/block":"post-only"===r&&(l="core/post-content");const c=n();return{renderingMode:r,isDesignPostType:Pi.includes(a),wrapperBlockName:l,wrapperUniqueId:t(),deviceType:s(),isFocusedEntity:!!c.onNavigateToPreviousEntityRecord,postType:a,isPreview:c.__unstableIsPreviewMode,layout:c.__experimentalFeatures.layout}}),[]),x=(0,c.__experimentalUseResizeCanvas)(h),f=_,v=(0,a.useRef)(),b=(0,c.__unstableUseTypewriter)(),w=(0,d.useMergeRefs)([v,n,"post-only"===l?b:null,Ci({isEnabled:"template-locked"===l}),ki({isEnabled:"template-locked"===l})]),j=!t||["Tablet","Mobile"].includes(h),S=[...null!==(r=e)&&void 0!==r?r:[],{css:`.is-root-container{display:flow-root; width:${"Desktop"===h?_.contentSize:"100%"}; margin: 0 auto;box-sizing: border-box;}`}];return(0,p.jsx)("div",{className:y()("editor-visual-editor","edit-post-visual-editor",o,{"has-padding":g,"is-iframed":j}),children:(0,p.jsx)(Ti,{shouldIframe:j,contentRef:w,styles:S,height:"100%",iframeProps:{...i,style:{...i?.style,...x}},children:(0,p.jsxs)(c.RecursionProvider,{blockName:m,uniqueId:u,children:[(0,p.jsx)(c.BlockList,{className:y()(`is-${h.toLowerCase()}-preview`,"has-global-padding"),layout:f,dropZoneElement:t?v.current:v.current?.parentNode,__unstableDisableDropZone:"template-locked"===l}),"template-locked"===l&&(0,p.jsx)(wi,{contentRef:v})]})})})}const Ii=(0,window.wp.priorityQueue.createQueue)();function Mi({children:e,placeholder:t}){const[i,n]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{const e={};return Ii.add(e,(()=>{(0,a.flushSync)((()=>{n(!0)}))})),()=>{Ii.cancel(e)}}),[]),i?e:t}function Bi(e,t){return e.map((e=>"core/post-content"===e.name?{...e,name:"core/group",innerBlocks:t}:e.innerBlocks?.length?{...e,innerBlocks:Bi(e.innerBlocks,t)}:e))}function Ri(){const{templates:e,patterns:t}=(0,s.useSelect)((e=>{const t=e(c.store).getBlocksByName("core/post-content")?.[0];return{templates:e(A).getEmailTemplates(),patterns:e(c.store).getPatternsByBlockTypes(["core/post-content"],t)}}),[]);if(!e||!t.length)return[[]];const i=t.find((e=>e?.templateTypes?.includes("email-general-template")))?.blocks,n=t.find((e=>e?.templateTypes?.includes("email-template")))?.blocks;return[e.map((e=>{let t=(0,f.parse)(e.content?.raw);return t=Bi(t,"email-general"===e.slug?i:n),{slug:e.slug,contentParsed:t,patternParsed:"email-general"===e.slug?i:n,template:e}}))]}const Ai="email-general";function Li({onSelectCallback:e}){const[t]=Ri(),i=t=>{var i;(0,s.dispatch)(B.store).resetEditorBlocks(t.patternParsed),(0,s.dispatch)(A).setTemplateToPost(t.slug,null!==(i=t.template.mailpoet_email_theme)&&void 0!==i?i:{}),e()};return(0,p.jsx)(S.Modal,{title:"Select a template",onRequestClose:()=>(()=>{const e=t.find((e=>e.slug===Ai));e&&i(e)})(),isFullScreen:!0,children:(0,p.jsxs)("div",{className:"block-editor-block-patterns-explorer",children:[(0,p.jsx)("div",{className:"block-editor-block-patterns-explorer__sidebar",children:(0,p.jsx)("div",{className:"block-editor-block-patterns-explorer__sidebar__categories-list",children:(0,p.jsx)(S.Button,{label:"Category",className:"block-editor-block-patterns-explorer__sidebar__categories-list__item",isPressed:!0,onClick:()=>{},children:"Dummy Category"},"category")})}),(0,p.jsx)("div",{className:"block-editor-block-patterns-explorer__list",children:(0,p.jsx)("div",{className:"block-editor-block-patterns-list",role:"listbox",children:t.map((e=>(0,p.jsx)("div",{className:"block-editor-block-patterns-list__list-item",children:(0,p.jsx)("div",{className:"block-editor-block-patterns-list__item",role:"button",tabIndex:0,onClick:()=>{i(e)},onKeyPress:t=>{"Enter"!==t.key&&" "!==t.key||i(e)},children:(0,p.jsxs)(Mi,{placeholder:(0,p.jsx)("p",{children:"rendering template"}),children:[(0,p.jsx)(c.BlockPreview,{blocks:e.contentParsed,viewportWidth:900,minHeight:300,additionalStyles:[{css:e.template.email_theme_css}]}),(0,p.jsx)(S.__experimentalHStack,{className:"block-editor-patterns__pattern-details",children:(0,p.jsx)("div",{className:"block-editor-block-patterns-list__item-title",children:e.template.title.rendered})})]})})},e.slug)))})})]})})}function Di(){const[e,t]=(0,a.useState)(!1),{emailContentIsEmpty:i,emailHasEdits:n}=(0,s.useSelect)((e=>({emailContentIsEmpty:e(A).hasEmptyContent(),emailHasEdits:e(A).hasEdits()})),[]);return!i||n||e?null:(0,p.jsx)(Li,{onSelectCallback:()=>t(!0)})}function Fi(){const{isFullscreenActive:e,isSidebarOpened:t,initialSettings:i,previewDeviceType:n,isInserterSidebarOpened:o,isListviewSidebarOpened:r,canUserEditMedia:l,hasFixedToolbar:d,focusMode:m,styles:u}=(0,s.useSelect)((e=>({isFullscreenActive:e(A).isFeatureActive("fullscreenMode"),isSidebarOpened:e(A).isSidebarOpened(),isInserterSidebarOpened:e(B.store).isInserterOpened(),isListviewSidebarOpened:e(B.store).isListViewOpened(),initialSettings:e(A).getInitialEditorSettings(),previewDeviceType:e(A).getDeviceType(),canUserEditMedia:e(R.store).canUser("create","media"),hasFixedToolbar:e(A).isFeatureActive("fixedToolbar"),focusMode:e(A).isFeatureActive("focusMode"),styles:e(A).getStyles()})),[]),{setIsInserterOpened:h}=(0,s.useDispatch)(B.store),[g]=function(){const{templateTheme:e}=Oe(),{editorTheme:t}=(0,s.useSelect)((e=>({editorTheme:e(A).getTheme()})),[]),i=(0,a.useMemo)((()=>Ve().all([{},t||{},e||{}])),[t,e]),[n]=ze(i);return[n]}(),_=y()("edit-post-layout",{"is-sidebar-opened":t}),x=(0,a.useRef)(null),f={background:"Desktop"===n?u.color.background:"transparent",fontFamily:u.typography.fontFamily,transition:"all 0.3s ease 0s"},v={...i,mediaUpload:l?G.uploadMedia:null,hasFixedToolbar:d,focusMode:m};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Be,{isActive:e}),(0,p.jsx)(B.UnsavedChangesWarning,{}),(0,p.jsx)(He,{}),(0,p.jsx)(Ut,{}),(0,p.jsx)(dt,{}),(0,p.jsx)(bi,{}),(0,p.jsx)(Di,{}),(0,p.jsx)(De,{className:_,header:(0,p.jsx)(zt,{}),editorNotices:(0,p.jsx)(qt,{}),content:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(qt,{}),(0,p.jsx)(c.BlockSelectionClearer,{className:"edit-post-visual-editor",style:f,onClick:()=>{o&&h(!1)},children:(0,p.jsx)("div",{className:"visual-editor__email_content_wrapper",children:(0,p.jsx)(Ni,{disableIframe:!1,styles:[...v.styles,...g],className:"has-global-padding",contentRef:x,iframeProps:{}})})})]}),sidebar:(0,p.jsx)(Me.Slot,{scope:A}),secondarySidebar:o&&(0,p.jsx)(Gt,{})||r&&(0,p.jsx)(Ht,{})}),(0,p.jsx)(mt,{})]})}function Vi({postId:e,postType:t,settings:i,initialEdits:n,...o}){const{currentPost:r,onNavigateToEntityRecord:l,onNavigateToPreviousEntityRecord:c}=function(e,t,i){const[n,o]=(0,a.useReducer)(((e,{type:t,post:i,previousRenderingMode:n})=>"push"===t?[...e,{post:i,previousRenderingMode:n}]:"pop"===t&&e.length>1?e.slice(0,-1):e),[{post:{postId:e,postType:t}}]),{post:r,previousRenderingMode:l}=n[n.length-1],{getRenderingMode:c}=(0,s.useSelect)(B.store),{setRenderingMode:d}=(0,s.useDispatch)(B.store),p=(0,a.useCallback)((e=>{o({type:"push",post:{postId:e.postId,postType:e.postType},previousRenderingMode:c()}),d(i)}),[c,d,i]),m=(0,a.useCallback)((()=>{o({type:"pop"}),l&&d(l)}),[d,l]);return{currentPost:r,onNavigateToEntityRecord:p,onNavigateToPreviousEntityRecord:n.length>1?m:void 0}}(e,t,"post-only"),{post:d,template:m}=(0,s.useSelect)((e=>{const{getEntityRecord:t}=e(R.store),{getEditedPostTemplate:i}=e(A),n=t("postType",r.postType,r.postId);return{template:"wp_template"!==r.postType?i():null,post:n}}),[r.postType,r.postId]),u=(0,s.useSelect)((e=>{const{hasFinishedResolution:t,getBlockPatternsForPostType:i}=H(e(R.store)),n=i(r.postType);return t("getBlockPatterns")?n:void 0}),[r.postType]),h=(0,a.useMemo)((()=>({...i,onNavigateToEntityRecord:l,onNavigateToPreviousEntityRecord:c,defaultRenderingMode:"template-locked",supportsTemplateMode:!0,__experimentalBlockPatterns:u})),[i,l,c,u]);return!d||"wp_template"!==r.postType&&!m?(0,p.jsx)("div",{className:"spinner-container",children:(0,p.jsx)(S.Spinner,{style:{width:"80px",height:"80px"}})}):(0,p.jsx)(S.SlotFillProvider,{children:(0,p.jsx)(B.EditorProvider,{settings:h,post:d,initialEdits:n,useSubRegistry:!1,__unstableTemplate:m,...o,children:(0,p.jsxs)(B.ErrorBoundary,{children:[(0,p.jsx)(Fi,{}),(0,p.jsx)(B.PostLockedModal,{})]})})})}const Oi=window.wp.dataControls,zi=e=>({registry:t})=>t.dispatch(J.store).toggle(A,e),Hi=e=>({registry:t})=>{t.dispatch(B.store).setDeviceType(e)};function Gi(e){return{type:"CHANGE_PREVIEW_STATE",state:{isModalOpened:e}}}function Ui(e){return{type:"CHANGE_PREVIEW_STATE",state:{toEmail:e}}}const Wi=(e=D)=>({registry:t})=>t.dispatch(ye).enableComplementaryArea(A,e),$i=()=>({registry:e})=>e.dispatch(ye).disableComplementaryArea(A);function qi(e){return{type:"TOGGLE_SETTINGS_SIDEBAR_ACTIVE_TAB",state:{activeTab:e}}}function*Yi(){const e=(0,s.select)(A).getEmailPostId(),t=yield(0,s.dispatch)(R.store).saveEditedEntityRecord("postType","mailpoet_email",e,{throwOnError:!0});t.then((()=>{(0,s.dispatch)(Ke.store).createErrorNotice((0,u.__)("Email saved!","mailpoet"),{type:"snackbar",isDismissible:!0,context:"email-editor"})})),t.catch((()=>{(0,s.dispatch)(Ke.store).createErrorNotice((0,u.__)("The email could not be saved. Please, clear browser cache and reload the page. If the problem persists, duplicate the email and try again.","mailpoet"),{type:"default",isDismissible:!0,context:"email-editor"})}))}function*Zi(e,t){const i=(0,s.select)(A).getEmailPostId(),n=(0,s.select)(R.store).getEditedEntityRecord("postType","mailpoet_email",i),o=n?.mailpoet_data||{};yield(0,s.dispatch)(R.store).editEntityRecord("postType","mailpoet_email",i,{mailpoet_data:{...o,[e]:t}})}const Ji=(e,t)=>async({registry:i})=>{const n=i.select(A).getEmailPostId();i.dispatch(R.store).editEntityRecord("postType","mailpoet_email",n,{template:e,meta:{mailpoet_email_theme:t}})};function*Xi(e,t){if(!(0,s.select)(A).getPreviewState().isSendingPreviewEmail){yield{type:"CHANGE_PREVIEW_STATE",state:{sendingPreviewStatus:null,isSendingPreviewEmail:!0}};try{const i=(0,s.select)(A).getEmailPostId();yield(0,Oi.apiFetch)({path:"/mailpoet-email-editor/v1/send_preview_email",method:"POST",data:{newsletterId:e,email:t,postId:i}}),yield{type:"CHANGE_PREVIEW_STATE",state:{sendingPreviewStatus:Et.SUCCESS,isSendingPreviewEmail:!1}}}catch(e){yield{type:"CHANGE_PREVIEW_STATE",state:{sendingPreviewStatus:Et.ERROR,isSendingPreviewEmail:!1}}}}}function Qi(){const e=new URLSearchParams(window.location.search),t=parseInt(e.get("post"),10);return{inserterSidebar:{isOpened:!1},listviewSidebar:{isOpened:!1},settingsSidebar:{activeTab:D},postId:t,editorSettings:window.MailPoetEmailEditor.editor_settings,theme:window.MailPoetEmailEditor.editor_theme,autosaveInterval:60,cdnUrl:window.MailPoetEmailEditor.cdn_url,isPremiumPluginActive:window.MailPoetEmailEditor.is_premium_plugin_active,urls:window.MailPoetEmailEditor.urls,preview:{deviceType:"Desktop",toEmail:window.MailPoetEmailEditor.current_wp_user_email,isModalOpened:!1,isSendingPreviewEmail:!1,sendingPreviewStatus:null}}}function Ki(e,t){switch(t.type){case"CHANGE_PREVIEW_STATE":return{...e,preview:{...e.preview,...t.state}};case"TOGGLE_SETTINGS_SIDEBAR_ACTIVE_TAB":return{...e,settingsSidebar:{...e.settingsSidebar,activeTab:t.state.activeTab}};default:return e}}const en=(0,s.createRegistrySelector)((e=>(t,i)=>!!e(J.store).get(A,i))),tn=(0,s.createRegistrySelector)((e=>()=>!!e(ye).getActiveComplementaryArea(A))),nn=(0,s.createRegistrySelector)((e=>()=>{const t=e(A).getEmailPostId();return!!e(R.store).hasEditsForEntityRecord("postType","mailpoet_email",t)})),on=(0,s.createRegistrySelector)((e=>()=>{const t=e(A).getEmailPostId();return!!e(R.store).getEntityRecord("postType","mailpoet_email",t)})),sn=(0,s.createRegistrySelector)((e=>()=>{const t=e(A).getEmailPostId();return!!e(R.store).isSavingEntityRecord("postType","mailpoet_email",t)})),an=(0,s.createRegistrySelector)((e=>()=>{const t=e(A).getEmailPostId(),i=e(R.store).getEntityRecord("postType","mailpoet_email",t);if(!i)return!0;const{content:n,mailpoet_data:o,title:s}=i;return!(n.raw||o.subject||o.preheader||s.raw)})),rn=(0,s.createRegistrySelector)((e=>()=>{const t=e(A).getEmailPostId(),i=e(R.store).getEntityRecord("postType","mailpoet_email",t);if(!i)return!0;const{content:n}=i;return!n.raw})),ln=(0,s.createRegistrySelector)((e=>()=>{const t=e(A).getEmailPostId(),i=e(R.store).getEntityRecord("postType","mailpoet_email",t);return!!i&&"sent"===i.status})),cn=(0,s.createRegistrySelector)((e=>()=>{const t=e(A).getEmailPostId(),i=e(R.store).getEditedEntityRecord("postType","mailpoet_email",t);if(i){if(i?.content&&"function"==typeof i.content)return i.content(i);if(i?.blocks)return(0,f.serialize)(i.blocks);if(i?.content)return i.content}return""})),dn=(0,s.createRegistrySelector)((e=>()=>{const t=e(B.store).getEditedPostAttribute("template");if(t){const i=e(R.store).getEntityRecords("postType","wp_template",{per_page:-1})?.find((e=>e.slug===t));return i?e(R.store).getEditedEntityRecord("postType","wp_template",i.id):i}const i=e(R.store).getDefaultTemplateId({slug:"email-general"});return e(R.store).getEditedEntityRecord("postType","wp_template",i)})),pn=()=>{const e=dn();return e?.content||""},mn=(0,s.createRegistrySelector)((e=>()=>{if("wp_template"===e(B.store).getCurrentPostType()){const t=e(B.store).getCurrentPostId();return e(R.store).getEditedEntityRecord("postType","wp_template",t)}return dn()})),un=(0,s.createRegistrySelector)((e=>()=>e(R.store).getEntityRecords("postType","wp_template",{per_page:-1,post_type:"mailpoet_email"})?.filter((e=>"mailpoet/mailpoet"===e.theme))));function hn(e){return e.postId}function gn(e){return e.settingsSidebar.activeTab}function xn(e){return e.editorSettings}function yn(e){return e.editorSettings.__experimentalFeatures.color.palette}function fn(e){return e.preview}const vn=(0,s.createRegistrySelector)((e=>()=>e(B.store).getDeviceType()));function bn(e){return e.theme.styles}function wn(e){return e.autosaveInterval}function jn(e){return e.cdnUrl}function Sn(e){return e.isPremiumPluginActive}function kn(e){return e.theme}function En(e){return e.urls}const Tn=window.wp.keyboardShortcuts;function Cn(){const{isSidebarOpened:e,hasEdits:t,isSaving:i}=(0,s.useSelect)((e=>({isSidebarOpened:e(A).isSidebarOpened(),isSaving:e(A).isSaving(),hasEdits:e(A).hasEdits()}))),{openSidebar:n,closeSidebar:o,saveEditedEmail:r,toggleFeature:l}=(0,s.useDispatch)(A),{registerShortcut:c}=(0,s.useDispatch)(Tn.store);return(0,a.useEffect)((()=>{c({name:"mailpoet/email-editor/toggle-fullscreen",category:"global",description:(0,u.__)("Toggle fullscreen mode.","mailpoet"),keyCombination:{modifier:"secondary",character:"f"}}),c({name:"mailpoet/email-editor/toggle-sidebar",category:"global",description:(0,u.__)("Show or hide the settings sidebar.","mailpoet"),keyCombination:{modifier:"primaryShift",character:","}}),c({name:"mailpoet/email-editor/save",category:"global",description:(0,u.__)("Save your changes.","mailpoet"),keyCombination:{modifier:"primary",character:"s"}})}),[c]),(0,Tn.useShortcut)("mailpoet/email-editor/toggle-fullscreen",(()=>{l("fullscreenMode")})),(0,Tn.useShortcut)("mailpoet/email-editor/toggle-sidebar",(t=>{t.preventDefault(),e?o():n()})),(0,Tn.useShortcut)("mailpoet/email-editor/save",(e=>{e.preventDefault(),t&&!i&&r()})),null}function Pn(){const{postId:e,settings:t}=(0,s.useSelect)((e=>({postId:e(A).getEmailPostId(),settings:e(A).getInitialEditorSettings()})),[]);return(0,p.jsxs)(a.StrictMode,{children:[(0,p.jsx)(Cn,{}),(0,p.jsx)(Vi,{initialEdits:[],postId:e,postType:"mailpoet_email",settings:t})]})}function Nn(e){const t=document.getElementById(e);t&&((()=>{const e=(0,s.createReduxStore)(A,{actions:n,controls:Oi.controls,selectors:o,reducer:Ki,initialState:Qi()});(0,s.register)(e)})(),(0,l.addFilter)("blocks.registerBlockType","mailpoet-email-editor/layout/addAttribute",P),(0,l.addFilter)("editor.BlockListBlock","mailpoet-email-editor/with-layout-styles",M),(0,l.addFilter)("editor.BlockEdit","mailpoet-email-editor/with-inspector-controls",N),(0,l.addFilter)("editor.BlockEdit","mailpoet-email-editor/deactivate-stack-on-mobile",m),(0,l.addFilter)("editor.BlockEdit","mailpoet-email-editor/hide-expand-on-click",g),(0,l.addFilter)("blocks.registerBlockType","mailpoet-email-editor/deactivate-image-filter",((e,t)=>"core/image"===t?{...e,supports:{...e.supports,filter:{duetone:!1}}}:e)),(0,_.unregisterFormatType)("core/image"),(0,_.unregisterFormatType)("core/code"),(0,_.unregisterFormatType)("core/language"),(0,l.addFilter)("blocks.registerBlockType","mailpoet-email-editor/disable-columns-layout",((e,t)=>"core/columns"===t||"core/column"===t?{...e,supports:{...e.supports,layout:!1}}:e)),(0,l.addFilter)("blocks.registerBlockType","mailpoet-email-editor/disable-group-variations",((e,t)=>"core/group"===t?{...e,variations:e.variations.filter((e=>"group"===e.name)),supports:{...e.supports,layout:!1}}:e)),(0,l.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-button",((e,t)=>"core/button"===t?{...e,styles:[]}:e)),(0,l.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-buttons",((e,t)=>"core/buttons"===t?{...e,supports:{...e.supports,layout:!1,__experimentalEmailFlexLayout:!0}}:e)),(0,l.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-column",((e,t)=>"core/column"===t?{...e,supports:{...e.supports,background:{backgroundImage:!0}}}:e)),(0,l.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-columns",((e,t)=>"core/columns"===t?{...e,supports:{...e.supports,background:{backgroundImage:!0}}}:e)),(0,l.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-post-content",((e,t)=>{return"core/post-content"===t?{...e,edit:(i=e.edit,function({context:e,__unstableLayoutClassNames:t}){const{postId:n,postType:o}=e;return n&&o?(0,p.jsx)(i,{context:e,__unstableLayoutClassNames:t}):(0,p.jsx)(h,{layoutClassNames:t})})}:e;var i})),(0,l.addFilter)("blocks.registerBlockType","mailpoet-email-editor/block-support",(e=>e.supports?.shadow?{...e,supports:{...e.supports,shadow:!1}}:e)),(0,r.registerCoreBlocks)(),(0,l.addFilter)("editor.MediaUpload","mailpoet/email-editor/replace-media-upload",(()=>G.MediaUpload)),(0,a.createRoot)(t).render((0,p.jsx)(Pn,{})))}window.addEventListener("DOMContentLoaded",(()=>{Nn("mailpoet-email-editor")}))})()})();